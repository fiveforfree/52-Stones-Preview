(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();const Ut=!1;var ct=Array.isArray,zn=Array.prototype.indexOf,ht=Array.from,Me=Object.defineProperty,be=Object.getOwnPropertyDescriptor,Wt=Object.getOwnPropertyDescriptors,Fn=Object.prototype,Hn=Array.prototype,gt=Object.getPrototypeOf,Tt=Object.isExtensible;const ue=()=>{};function Un(e){return e()}function it(e){for(var t=0;t<e.length;t++)e[t]()}function Wn(){var e,t,n=new Promise((i,r)=>{e=i,t=r});return{promise:n,resolve:e,reject:t}}const N=2,dt=4,Ue=8,de=16,K=32,ie=64,Bt=128,z=256,Re=512,L=1024,F=2048,$=4096,H=8192,ve=16384,vt=32768,Vt=65536,kt=1<<17,Bn=1<<18,Ce=1<<19,Gt=1<<20,rt=1<<21,mt=1<<22,te=1<<23,le=Symbol("$state"),Vn=Symbol(""),_t=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Gn(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function Yn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Kn(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Xn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Jn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Zn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Qn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function $n(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ei(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ti(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const We=1,Be=2,Yt=4,ni=8,ii=16,ri=1,si=2,j=Symbol(),oi="http://www.w3.org/1999/xhtml";let ai=!1;function Kt(e){return e===this.v}function Xt(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Jt(e){return!Xt(e,this.v)}let Te=!1,ui=!1;function li(){Te=!0}let T=null;function Ne(e){T=e}function ke(e,t=!1,n){T={p:T,c:null,e:null,s:e,x:null,l:Te&&!t?{s:null,u:null,$:[]}:null}}function Ae(e){var t=T,n=t.e;if(n!==null){t.e=null;for(var i of n)hn(i)}return T=t.p,{}}function je(){return!Te||T!==null&&T.l===null}const fi=new WeakMap;function ci(e){var t=p;if(t===null)return _.f|=te,e;if((t.f&vt)===0){if((t.f&Bt)===0)throw!t.parent&&e instanceof Error&&Zt(e),e;t.b.error(e)}else pt(e,t)}function pt(e,t){for(;t!==null;){if((t.f&Bt)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e instanceof Error&&Zt(e),e}function Zt(e){const t=fi.get(e);t&&(Me(e,"message",{value:t.message}),Me(e,"stack",{value:t.stack}))}let qe=[];function hi(){var e=qe;qe=[],it(e)}function wt(e){qe.length===0&&queueMicrotask(hi),qe.push(e)}function gi(){for(var e=p.b;e!==null&&!e.has_pending_snippet();)e=e.parent;return e===null&&Gn(),e}function Ve(e){var t=N|F,n=_!==null&&(_.f&N)!==0?_:null;return p===null||n!==null&&(n.f&z)!==0?t|=z:p.f|=Ce,{ctx:T,deps:null,effects:null,equals:Kt,f:t,fn:e,reactions:null,rv:0,v:j,wv:0,parent:n??p,ac:null}}function di(e,t){let n=p;n===null&&Kn();var i=n.b,r=void 0,s=Ee(j),o=null,l=!_;return ki(()=>{try{var a=e();o&&Promise.resolve(a).catch(()=>{})}catch(g){a=Promise.reject(g)}var u=()=>a;r=o?.then(u,u)??Promise.resolve(a),o=r;var c=O,d=i.pending;l&&(i.update_pending_count(1),d||c.increment());const h=(g,f=void 0)=>{o=null,d||c.activate(),f?f!==_t&&(s.f|=te,Se(s,f)):((s.f&te)!==0&&(s.f^=te),Se(s,g)),l&&(i.update_pending_count(-1),d||c.decrement()),nn()};if(r.then(h,g=>h(null,g||"unknown")),c)return()=>{queueMicrotask(()=>c.neuter())}}),new Promise(a=>{function u(c){function d(){c===r?a(s):u(r)}c.then(d,d)}u(r)})}function Qt(e){const t=Ve(e);return yn(t),t}function $t(e){const t=Ve(e);return t.equals=Jt,t}function en(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Y(t[n])}}function vi(e){for(var t=e.parent;t!==null;){if((t.f&N)===0)return t;t=t.parent}return null}function bt(e){var t,n=p;Q(vi(e));try{en(e),t=xn(e)}finally{Q(n)}return t}function tn(e){var t=bt(e);if(e.equals(t)||(e.v=t,e.wv=Sn()),!me){var n=(J||(e.f&z)!==0)&&e.deps!==null?$:L;M(e,n)}}function mi(e,t,n){const i=je()?Ve:$t;if(t.length===0){n(e.map(i));return}var r=O,s=p,o=_i(),l=gi();Promise.all(t.map(a=>di(a))).then(a=>{r?.activate(),o();try{n([...e.map(i),...a])}catch(u){(s.f&ve)===0&&pt(u,s)}r?.deactivate(),nn()}).catch(a=>{l.error(a)})}function _i(){var e=p,t=_,n=T,i=O;return function(){Q(e),B(t),Ne(n),i?.activate()}}function nn(){Q(null),B(null),Ne(null)}const et=new Set;let O=null,At=new Set,ze=[];function rn(){const e=ze.shift();ze.length>0&&queueMicrotask(rn),e()}let ye=[],yt=null,st=!1;class he{current=new Map;#u=new Map;#r=new Set;#e=0;#l=null;#f=!1;#n=[];#s=[];#i=[];#t=[];#o=[];#c=[];#h=[];skipped_effects=new Set;process(t){ye=[];for(const r of t)this.#d(r);if(this.#n.length===0&&this.#e===0){this.#g();var n=this.#i,i=this.#t;this.#i=[],this.#t=[],this.#o=[],O=null,jt(n),jt(i),O===null?O=this:et.delete(this),this.#l?.resolve()}else this.#a(this.#i),this.#a(this.#t),this.#a(this.#o);for(const r of this.#n)ce(r);for(const r of this.#s)ce(r);this.#n=[],this.#s=[]}#d(t){t.f^=L;for(var n=t.first;n!==null;){var i=n.f,r=(i&(K|ie))!==0,s=r&&(i&L)!==0,o=s||(i&H)!==0||this.skipped_effects.has(n);if(!o&&n.fn!==null){if(r)n.f^=L;else if((i&dt)!==0)this.#t.push(n);else if((i&L)===0)if((i&mt)!==0){var l=n.b?.pending?this.#s:this.#n;l.push(n)}else Ye(n)&&((n.f&de)!==0&&this.#o.push(n),ce(n));var a=n.first;if(a!==null){n=a;continue}}var u=n.parent;for(n=n.next;n===null&&u!==null;)n=u.next,u=u.parent}}#a(t){for(const n of t)((n.f&F)!==0?this.#c:this.#h).push(n),M(n,L);t.length=0}capture(t,n){this.#u.has(t)||this.#u.set(t,n),this.current.set(t,t.v)}activate(){O=this}deactivate(){O=null;for(const t of At)if(At.delete(t),t(),O!==null)break}neuter(){this.#f=!0}flush(){ye.length>0?pi():this.#g(),O===this&&(this.#e===0&&et.delete(this),this.deactivate())}#g(){if(!this.#f)for(const t of this.#r)t();this.#r.clear()}increment(){this.#e+=1}decrement(){if(this.#e-=1,this.#e===0){for(const t of this.#c)M(t,F),ge(t);for(const t of this.#h)M(t,$),ge(t);this.#i=[],this.#t=[],this.flush()}else this.deactivate()}add_callback(t){this.#r.add(t)}settled(){return(this.#l??=Wn()).promise}static ensure(){if(O===null){const t=O=new he;et.add(O),he.enqueue(()=>{O===t&&t.flush()})}return O}static enqueue(t){ze.length===0&&queueMicrotask(rn),ze.unshift(t)}}function pi(){var e=fe;st=!0;try{var t=0;for(Lt(!0);ye.length>0;){var n=he.ensure();if(t++>1e3){var i,r;wi()}n.process(ye),Z.clear()}}finally{st=!1,Lt(e),yt=null}}function wi(){try{Qn()}catch(e){pt(e,yt)}}let ee=null;function jt(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var i=e[n++];if((i.f&(ve|H))===0&&Ye(i)&&(ee=[],ce(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null&&i.ac===null?mn(i):i.fn=null),ee?.length>0)){Z.clear();for(const r of ee)ce(r);ee=[]}}ee=null}}function ge(e){for(var t=yt=e;t.parent!==null;){t=t.parent;var n=t.f;if(st&&t===p&&(n&de)!==0)return;if((n&(ie|K))!==0){if((n&L)===0)return;t.f^=L}}ye.push(t)}const Z=new Map;function Ee(e,t){var n={f:0,v:e,reactions:null,equals:Kt,rv:0,wv:0};return n}function k(e,t){const n=Ee(e);return yn(n),n}function sn(e,t=!1,n=!0){const i=Ee(e);return t||(i.equals=Jt),Te&&n&&T!==null&&T.l!==null&&(T.l.s??=[]).push(i),i}function I(e,t,n=!1){_!==null&&(!W||(_.f&kt)!==0)&&je()&&(_.f&(N|de|mt|kt))!==0&&!G?.includes(e)&&ti();let i=n?oe(t):t;return Se(e,i)}function Se(e,t){if(!e.equals(t)){var n=e.v;me?Z.set(e,t):Z.set(e,n),e.v=t;var i=he.ensure();i.capture(e,n),(e.f&N)!==0&&((e.f&F)!==0&&bt(e),M(e,(e.f&z)===0?L:$)),e.wv=Sn(),on(e,F),je()&&p!==null&&(p.f&L)!==0&&(p.f&(K|ie))===0&&(q===null?Di([e]):q.push(e))}return t}function tt(e){I(e,e.v+1)}function on(e,t){var n=e.reactions;if(n!==null)for(var i=je(),r=n.length,s=0;s<r;s++){var o=n[s],l=o.f;if(!(!i&&o===p)){var a=(l&F)===0;a&&M(o,t),(l&N)!==0?on(o,$):a&&((l&de)!==0&&ee!==null&&ee.push(o),ge(o))}}}function oe(e){if(typeof e!="object"||e===null||le in e)return e;const t=gt(e);if(t!==Fn&&t!==Hn)return e;var n=new Map,i=ct(e),r=k(0),s=ne,o=l=>{if(ne===s)return l();var a=_,u=ne;B(null),Pt(s);var c=l();return B(a),Pt(u),c};return i&&n.set("length",k(e.length)),new Proxy(e,{defineProperty(l,a,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&$n();var c=n.get(a);return c===void 0?c=o(()=>{var d=k(u.value);return n.set(a,d),d}):I(c,u.value,!0),!0},deleteProperty(l,a){var u=n.get(a);if(u===void 0){if(a in l){const c=o(()=>k(j));n.set(a,c),tt(r)}}else I(u,j),tt(r);return!0},get(l,a,u){if(a===le)return e;var c=n.get(a),d=a in l;if(c===void 0&&(!d||be(l,a)?.writable)&&(c=o(()=>{var g=oe(d?l[a]:j),f=k(g);return f}),n.set(a,c)),c!==void 0){var h=b(c);return h===j?void 0:h}return Reflect.get(l,a,u)},getOwnPropertyDescriptor(l,a){var u=Reflect.getOwnPropertyDescriptor(l,a);if(u&&"value"in u){var c=n.get(a);c&&(u.value=b(c))}else if(u===void 0){var d=n.get(a),h=d?.v;if(d!==void 0&&h!==j)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(l,a){if(a===le)return!0;var u=n.get(a),c=u!==void 0&&u.v!==j||Reflect.has(l,a);if(u!==void 0||p!==null&&(!c||be(l,a)?.writable)){u===void 0&&(u=o(()=>{var h=c?oe(l[a]):j,g=k(h);return g}),n.set(a,u));var d=b(u);if(d===j)return!1}return c},set(l,a,u,c){var d=n.get(a),h=a in l;if(i&&a==="length")for(var g=u;g<d.v;g+=1){var f=n.get(g+"");f!==void 0?I(f,j):g in l&&(f=o(()=>k(j)),n.set(g+"",f))}if(d===void 0)(!h||be(l,a)?.writable)&&(d=o(()=>k(void 0)),I(d,oe(u)),n.set(a,d));else{h=d.v!==j;var m=o(()=>oe(u));I(d,m)}var v=Reflect.getOwnPropertyDescriptor(l,a);if(v?.set&&v.set.call(c,u),!h){if(i&&typeof a=="string"){var E=n.get("length"),S=Number(a);Number.isInteger(S)&&S>=E.v&&I(E,S+1)}tt(r)}return!0},ownKeys(l){b(r);var a=Reflect.ownKeys(l).filter(d=>{var h=n.get(d);return h===void 0||h.v!==j});for(var[u,c]of n)c.v!==j&&!(u in l)&&a.push(u);return a},setPrototypeOf(){ei()}})}var Ot,an,un,ln;function bi(){if(Ot===void 0){Ot=window,an=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;un=be(t,"firstChild").get,ln=be(t,"nextSibling").get,Tt(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Tt(n)&&(n.__t=void 0)}}function Et(e=""){return document.createTextNode(e)}function Fe(e){return un.call(e)}function Ge(e){return ln.call(e)}function ot(e,t){return Fe(e)}function yi(e,t){{var n=Fe(e);return n instanceof Comment&&n.data===""?Ge(n):n}}function at(e,t=1,n=!1){let i=e;for(;t--;)i=Ge(i);return i}function Ei(e){e.textContent=""}function Si(){return!1}function St(e){var t=_,n=p;B(null),Q(null);try{return e()}finally{B(t),Q(n)}}function fn(e){p===null&&_===null&&Zn(),_!==null&&(_.f&z)!==0&&p===null&&Jn(),me&&Xn()}function Ii(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function V(e,t,n,i=!0){var r=p;r!==null&&(r.f&H)!==0&&(e|=H);var s={ctx:T,deps:null,nodes_start:null,nodes_end:null,f:e|F,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{ce(s),s.f|=vt}catch(a){throw Y(s),a}else t!==null&&ge(s);if(i){var o=s;if(n&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&(o.f&Ce)===0&&(o=o.first),o!==null&&(o.parent=r,r!==null&&Ii(o,r),_!==null&&(_.f&N)!==0&&(e&ie)===0)){var l=_;(l.effects??=[]).push(o)}}return s}function cn(e){const t=V(Ue,null,!1);return M(t,L),t.teardown=e,t}function Ie(e){fn();var t=p.f,n=!_&&(t&K)!==0&&(t&vt)===0;if(n){var i=T;(i.e??=[]).push(e)}else return hn(e)}function hn(e){return V(dt|Gt,e,!1)}function xi(e){return fn(),V(Ue|Gt,e,!0)}function Ci(e){he.ensure();const t=V(ie|Ce,e,!0);return(n={})=>new Promise(i=>{n.outro?_n(t,()=>{Y(t),i(void 0)}):(Y(t),i(void 0))})}function Ti(e){return V(dt,e,!1)}function ki(e){return V(mt|Ce,e,!0)}function Ai(e,t=0){return V(Ue|t,e,!0)}function gn(e,t=[],n=[]){mi(t,n,i=>{V(Ue,()=>e(...i.map(b)),!0)})}function ji(e,t=0){var n=V(de|t,e,!0);return n}function It(e,t=!0){return V(K|Ce,e,!0,t)}function dn(e){var t=e.teardown;if(t!==null){const n=me,i=_;Dt(!0),B(null);try{t.call(null)}finally{Dt(n),B(i)}}}function vn(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const r=n.ac;r!==null&&St(()=>{r.abort(_t)});var i=n.next;(n.f&ie)!==0?n.parent=null:Y(n,t),n=i}}function Oi(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&K)===0&&Y(t),t=n}}function Y(e,t=!0){var n=!1;(t||(e.f&Bn)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Li(e.nodes_start,e.nodes_end),n=!0),vn(e,t&&!n),He(e,0),M(e,ve);var i=e.transitions;if(i!==null)for(const s of i)s.stop();dn(e);var r=e.parent;r!==null&&r.first!==null&&mn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Li(e,t){for(;e!==null;){var n=e===t?null:Ge(e);e.remove(),e=n}}function mn(e){var t=e.parent,n=e.prev,i=e.next;n!==null&&(n.next=i),i!==null&&(i.prev=n),t!==null&&(t.first===e&&(t.first=i),t.last===e&&(t.last=n))}function _n(e,t){var n=[];xt(e,n,!0),pn(n,()=>{Y(e),t&&t()})}function pn(e,t){var n=e.length;if(n>0){var i=()=>--n||t();for(var r of e)r.out(i)}else t()}function xt(e,t,n){if((e.f&H)===0){if(e.f^=H,e.transitions!==null)for(const o of e.transitions)(o.is_global||n)&&t.push(o);for(var i=e.first;i!==null;){var r=i.next,s=(i.f&Vt)!==0||(i.f&K)!==0;xt(i,t,s?n:!1),i=r}}}function wn(e){bn(e,!0)}function bn(e,t){if((e.f&H)!==0){e.f^=H,(e.f&L)===0&&(M(e,F),ge(e));for(var n=e.first;n!==null;){var i=n.next,r=(n.f&Vt)!==0||(n.f&K)!==0;bn(n,r?t:!1),n=i}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}let fe=!1;function Lt(e){fe=e}let me=!1;function Dt(e){me=e}let _=null,W=!1;function B(e){_=e}let p=null;function Q(e){p=e}let G=null;function yn(e){_!==null&&(G===null?G=[e]:G.push(e))}let D=null,R=0,q=null;function Di(e){q=e}let En=1,xe=0,ne=xe;function Pt(e){ne=e}let J=!1;function Sn(){return++En}function Ye(e){var t=e.f;if((t&F)!==0)return!0;if((t&$)!==0){var n=e.deps,i=(t&z)!==0;if(n!==null){var r,s,o=(t&Re)!==0,l=i&&p!==null&&!J,a=n.length;if((o||l)&&(p===null||(p.f&ve)===0)){var u=e,c=u.parent;for(r=0;r<a;r++)s=n[r],(o||!s?.reactions?.includes(u))&&(s.reactions??=[]).push(u);o&&(u.f^=Re),l&&c!==null&&(c.f&z)===0&&(u.f^=z)}for(r=0;r<a;r++)if(s=n[r],Ye(s)&&tn(s),s.wv>e.wv)return!0}(!i||p!==null&&!J)&&M(e,L)}return!1}function In(e,t,n=!0){var i=e.reactions;if(i!==null&&!G?.includes(e))for(var r=0;r<i.length;r++){var s=i[r];(s.f&N)!==0?In(s,t,!1):t===s&&(n?M(s,F):(s.f&L)!==0&&M(s,$),ge(s))}}function xn(e){var t=D,n=R,i=q,r=_,s=J,o=G,l=T,a=W,u=ne,c=e.f;D=null,R=0,q=null,J=(c&z)!==0&&(W||!fe||_===null),_=(c&(K|ie))===0?e:null,G=null,Ne(e.ctx),W=!1,ne=++xe,e.ac!==null&&(St(()=>{e.ac.abort(_t)}),e.ac=null);try{e.f|=rt;var d=e.fn,h=d(),g=e.deps;if(D!==null){var f;if(He(e,R),g!==null&&R>0)for(g.length=R+D.length,f=0;f<D.length;f++)g[R+f]=D[f];else e.deps=g=D;if(!J||(c&N)!==0&&e.reactions!==null)for(f=R;f<g.length;f++)(g[f].reactions??=[]).push(e)}else g!==null&&R<g.length&&(He(e,R),g.length=R);if(je()&&q!==null&&!W&&g!==null&&(e.f&(N|$|F))===0)for(f=0;f<q.length;f++)In(q[f],e);return r!==null&&r!==e&&(xe++,q!==null&&(i===null?i=q:i.push(...q))),(e.f&te)!==0&&(e.f^=te),h}catch(m){return ci(m)}finally{e.f^=rt,D=t,R=n,q=i,_=r,J=s,G=o,Ne(l),W=a,ne=u}}function Pi(e,t){let n=t.reactions;if(n!==null){var i=zn.call(n,e);if(i!==-1){var r=n.length-1;r===0?n=t.reactions=null:(n[i]=n[r],n.pop())}}n===null&&(t.f&N)!==0&&(D===null||!D.includes(t))&&(M(t,$),(t.f&(z|Re))===0&&(t.f^=Re),en(t),He(t,0))}function He(e,t){var n=e.deps;if(n!==null)for(var i=t;i<n.length;i++)Pi(e,n[i])}function ce(e){var t=e.f;if((t&ve)===0){M(e,L);var n=p,i=fe;p=e,fe=!0;try{(t&de)!==0?Oi(e):vn(e),dn(e);var r=xn(e);e.teardown=typeof r=="function"?r:null,e.wv=En;var s;Ut&&ui&&(e.f&F)!==0&&e.deps}finally{fe=i,p=n}}}function b(e){var t=e.f,n=(t&N)!==0;if(_!==null&&!W){var i=p!==null&&(p.f&ve)!==0;if(!i&&!G?.includes(e)){var r=_.deps;if((_.f&rt)!==0)e.rv<xe&&(e.rv=xe,D===null&&r!==null&&r[R]===e?R++:D===null?D=[e]:(!J||!D.includes(e))&&D.push(e));else{(_.deps??=[]).push(e);var s=e.reactions;s===null?e.reactions=[_]:s.includes(_)||s.push(_)}}}else if(n&&e.deps===null&&e.effects===null){var o=e,l=o.parent;l!==null&&(l.f&z)===0&&(o.f^=z)}if(me){if(Z.has(e))return Z.get(e);if(n){o=e;var a=o.v;return((o.f&L)===0&&o.reactions!==null||Cn(o))&&(a=bt(o)),Z.set(o,a),a}}else n&&(o=e,Ye(o)&&tn(o));if((e.f&te)!==0)throw e.v;return e.v}function Cn(e){if(e.v===j)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Z.has(t)||(t.f&N)!==0&&Cn(t))return!0;return!1}function Ke(e){var t=W;try{return W=!0,e()}finally{W=t}}const Mi=-7169;function M(e,t){e.f=e.f&Mi|t}function Ri(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(le in e)ut(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&le in n&&ut(n)}}}function ut(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let i in e)try{ut(e[i],t)}catch{}const n=gt(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const i=Wt(n);for(let r in i){const s=i[r].get;if(s)try{s.call(e)}catch{}}}}}const Ni=["touchstart","touchmove"];function qi(e){return Ni.includes(e)}const Tn=new Set,lt=new Set;function zi(e,t,n,i={}){function r(s){if(i.capture||pe.call(t,s),!s.cancelBubble)return St(()=>n?.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?wt(()=>{t.addEventListener(e,r,i)}):t.addEventListener(e,r,i),r}function Mt(e,t,n,i,r){var s={capture:i,passive:r},o=zi(e,t,n,s);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&cn(()=>{t.removeEventListener(e,o,s)})}function kn(e){for(var t=0;t<e.length;t++)Tn.add(e[t]);for(var n of lt)n(e)}let Rt=null;function pe(e){var t=this,n=t.ownerDocument,i=e.type,r=e.composedPath?.()||[],s=r[0]||e.target;Rt=e;var o=0,l=Rt===e&&e.__root;if(l){var a=r.indexOf(l);if(a!==-1&&(t===document||t===window)){e.__root=t;return}var u=r.indexOf(t);if(u===-1)return;a<=u&&(o=a)}if(s=r[o]||e.target,s!==t){Me(e,"currentTarget",{configurable:!0,get(){return s||n}});var c=_,d=p;B(null),Q(null);try{for(var h,g=[];s!==null;){var f=s.assignedSlot||s.parentNode||s.host||null;try{var m=s["__"+i];if(m!=null&&(!s.disabled||e.target===s))if(ct(m)){var[v,...E]=m;v.apply(s,[e,...E])}else m.call(s,e)}catch(S){h?g.push(S):h=S}if(e.cancelBubble||f===t||f===null)break;s=f}if(h){for(let S of g)queueMicrotask(()=>{throw S});throw h}}finally{e.__root=t,delete e.currentTarget,B(c),Q(d)}}}function Fi(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Nt(e,t){var n=p;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function Xe(e,t){var n=(t&ri)!==0,i=(t&si)!==0,r,s=!e.startsWith("<!>");return()=>{r===void 0&&(r=Fi(s?e:"<!>"+e),n||(r=Fe(r)));var o=i||an?document.importNode(r,!0):r.cloneNode(!0);if(n){var l=Fe(o),a=o.lastChild;Nt(l,a)}else Nt(o,o);return o}}function Je(e,t){e!==null&&e.before(t)}function Hi(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function Ui(e,t){return Wi(e,t)}const re=new Map;function Wi(e,{target:t,anchor:n,props:i={},events:r,context:s,intro:o=!0}){bi();var l=new Set,a=d=>{for(var h=0;h<d.length;h++){var g=d[h];if(!l.has(g)){l.add(g);var f=qi(g);t.addEventListener(g,pe,{passive:f});var m=re.get(g);m===void 0?(document.addEventListener(g,pe,{passive:f}),re.set(g,1)):re.set(g,m+1)}}};a(ht(Tn)),lt.add(a);var u=void 0,c=Ci(()=>{var d=n??t.appendChild(Et());return It(()=>{if(s){ke({});var h=T;h.c=s}r&&(i.$$events=r),u=e(d,i)||{},s&&Ae()}),()=>{for(var h of l){t.removeEventListener(h,pe);var g=re.get(h);--g===0?(document.removeEventListener(h,pe),re.delete(h)):re.set(h,g)}lt.delete(a),d!==n&&d.parentNode?.removeChild(d)}});return Bi.set(u,c),u}let Bi=new WeakMap;function An(e,t){return t}function Vi(e,t,n){for(var i=e.items,r=[],s=t.length,o=0;o<s;o++)xt(t[o].e,r,!0);var l=s>0&&r.length===0&&n!==null;if(l){var a=n.parentNode;Ei(a),a.append(n),i.clear(),U(e,t[0].prev,t[s-1].next)}pn(r,()=>{for(var u=0;u<s;u++){var c=t[u];l||(i.delete(c.k),U(e,c.prev,c.next)),Y(c.e,!l)}})}function jn(e,t,n,i,r,s=null){var o=e,l={flags:t,items:new Map,first:null},a=(t&Yt)!==0;if(a){var u=e;o=u.appendChild(Et())}var c=null,d=!1,h=new Map,g=$t(()=>{var E=n();return ct(E)?E:E==null?[]:ht(E)}),f,m;function v(){Gi(m,f,l,h,o,r,t,i,n),s!==null&&(f.length===0?c?wn(c):c=It(()=>s(o)):c!==null&&_n(c,()=>{c=null}))}ji(()=>{m??=p,f=b(g);var E=f.length;if(!(d&&E===0)){d=E===0;var S,C,A,x;if(Si()){var w=new Set,y=O;for(C=0;C<E;C+=1){A=f[C],x=i(A,C);var P=l.items.get(x)??h.get(x);P?(t&(We|Be))!==0&&On(P,A,C,t):(S=Ln(null,l,null,null,A,x,C,r,t,n,!0),h.set(x,S)),w.add(x)}for(const[Oe,Ze]of l.items)w.has(Oe)||y.skipped_effects.add(Ze.e);y.add_callback(v)}else v();b(g)}})}function Gi(e,t,n,i,r,s,o,l,a){var u=(o&ni)!==0,c=(o&(We|Be))!==0,d=t.length,h=n.items,g=n.first,f=g,m,v=null,E,S=[],C=[],A,x,w,y;if(u)for(y=0;y<d;y+=1)A=t[y],x=l(A,y),w=h.get(x),w!==void 0&&(w.a?.measure(),(E??=new Set).add(w));for(y=0;y<d;y+=1){if(A=t[y],x=l(A,y),w=h.get(x),w===void 0){var P=i.get(x);if(P!==void 0){i.delete(x),h.set(x,P);var Oe=v?v.next:f;U(n,v,P),U(n,P,Oe),nt(P,Oe,r),v=P}else{var Ze=f?f.e.nodes_start:r;v=Ln(Ze,n,v,v===null?n.first:v.next,A,x,y,s,o,a)}h.set(x,v),S=[],C=[],f=v.next;continue}if(c&&On(w,A,y,o),(w.e.f&H)!==0&&(wn(w.e),u&&(w.a?.unfix(),(E??=new Set).delete(w))),w!==f){if(m!==void 0&&m.has(w)){if(S.length<C.length){var Le=C[0],X;v=Le.prev;var Ct=S[0],Qe=S[S.length-1];for(X=0;X<S.length;X+=1)nt(S[X],Le,r);for(X=0;X<C.length;X+=1)m.delete(C[X]);U(n,Ct.prev,Qe.next),U(n,v,Ct),U(n,Qe,Le),f=Le,v=Qe,y-=1,S=[],C=[]}else m.delete(w),nt(w,f,r),U(n,w.prev,w.next),U(n,w,v===null?n.first:v.next),U(n,v,w),v=w;continue}for(S=[],C=[];f!==null&&f.k!==x;)(f.e.f&H)===0&&(m??=new Set).add(f),C.push(f),f=f.next;if(f===null)continue;w=f}S.push(w),v=w,f=w.next}if(f!==null||m!==void 0){for(var _e=m===void 0?[]:ht(m);f!==null;)(f.e.f&H)===0&&_e.push(f),f=f.next;var $e=_e.length;if($e>0){var Nn=(o&Yt)!==0&&d===0?r:null;if(u){for(y=0;y<$e;y+=1)_e[y].a?.measure();for(y=0;y<$e;y+=1)_e[y].a?.fix()}Vi(n,_e,Nn)}}u&&wt(()=>{if(E!==void 0)for(w of E)w.a?.apply()}),e.first=n.first&&n.first.e,e.last=v&&v.e;for(var qn of i.values())Y(qn.e);i.clear()}function On(e,t,n,i){(i&We)!==0&&Se(e.v,t),(i&Be)!==0?Se(e.i,n):e.i=n}function Ln(e,t,n,i,r,s,o,l,a,u,c){var d=(a&We)!==0,h=(a&ii)===0,g=d?h?sn(r,!1,!1):Ee(r):r,f=(a&Be)===0?o:Ee(o),m={i:f,v:g,k:s,a:null,e:null,prev:n,next:i};try{if(e===null){var v=document.createDocumentFragment();v.append(e=Et())}return m.e=It(()=>l(e,g,f,u),ai),m.e.prev=n&&n.e,m.e.next=i&&i.e,n===null?c||(t.first=m):(n.next=m,n.e.next=m.e),i!==null&&(i.prev=m,i.e.prev=m.e),m}finally{}}function nt(e,t,n){for(var i=e.next?e.next.e.nodes_start:n,r=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==null&&s!==i;){var o=Ge(s);r.before(s),s=o}}function U(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Yi(e,t){return e==null?null:String(e)}function we(e,t,n,i){var r=e.__style;if(r!==t){var s=Yi(t);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}return i}const Ki=Symbol("is custom element"),Xi=Symbol("is html");function ae(e,t,n,i){var r=Ji(e);r[t]!==(r[t]=n)&&(t==="loading"&&(e[Vn]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Zi(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Ji(e){return e.__attributes??={[Ki]:e.nodeName.includes("-"),[Xi]:e.namespaceURI===oi}}var qt=new Map;function Zi(e){var t=e.getAttribute("is")||e.nodeName,n=qt.get(t);if(n)return n;qt.set(t,n=[]);for(var i,r=e,s=Element.prototype;s!==r;){i=Wt(r);for(var o in i)i[o].set&&n.push(o);r=gt(r)}return n}function zt(e,t){return e===t||e?.[le]===t}function Qi(e={},t,n,i){return Ti(()=>{var r,s;return Ai(()=>{r=s,s=[],Ke(()=>{e!==n(...s)&&(t(e,...s),r&&zt(n(...r),e)&&t(null,...r))})}),()=>{wt(()=>{s&&zt(n(...s),e)&&t(null,...s)})}}),e}function $i(e=!1){const t=T,n=t.l.u;if(!n)return;let i=()=>Ri(t.s);if(e){let r=0,s={};const o=Ve(()=>{let l=!1;const a=t.s;for(const u in a)a[u]!==s[u]&&(s[u]=a[u],l=!0);return l&&r++,r});i=()=>b(o)}n.b.length&&xi(()=>{Ft(t,i),it(n.b)}),Ie(()=>{const r=Ke(()=>n.m.map(Un));return()=>{for(const s of r)typeof s=="function"&&s()}}),n.a.length&&Ie(()=>{Ft(t,i),it(n.a)})}function Ft(e,t){if(e.l.s)for(const n of e.l.s)b(n);t()}function Dn(e,t,n){if(e==null)return t(void 0),ue;const i=Ke(()=>e.subscribe(t,n));return i.unsubscribe?()=>i.unsubscribe():i}const se=[];function er(e,t=ue){let n=null;const i=new Set;function r(l){if(Xt(e,l)&&(e=l,n)){const a=!se.length;for(const u of i)u[1](),se.push(u,e);if(a){for(let u=0;u<se.length;u+=2)se[u][0](se[u+1]);se.length=0}}}function s(l){r(l(e))}function o(l,a=ue){const u=[l,a];return i.add(u),i.size===1&&(n=t(r,s)||ue),l(e),()=>{i.delete(u),i.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:o}}function tr(e){let t;return Dn(e,n=>t=n)(),t}let ft=Symbol();function Pn(e,t,n){const i=n[t]??={store:null,source:sn(void 0),unsubscribe:ue};if(i.store!==e&&!(ft in n))if(i.unsubscribe(),i.store=e??null,e==null)i.source.v=void 0,i.unsubscribe=ue;else{var r=!0;i.unsubscribe=Dn(e,s=>{r?i.source.v=s:I(i.source,s)}),r=!1}return e&&ft in n?tr(e):b(i.source)}function Ht(e,t){return e.set(t),t}function Mn(){const e={};function t(){cn(()=>{for(var n in e)e[n].unsubscribe();Me(e,ft,{enumerable:!1,value:!0})})}return[e,t]}function Rn(e){T===null&&Yn(),Te&&T.l!==null?nr(T).m.push(e):Ie(()=>{const t=Ke(e);if(typeof t=="function")return t})}function nr(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const ir="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(ir);li();function rr(e,t){t.onclick&&t.onclick(t.index)}function sr(e,t){I(t,!0)}var or=Xe('<div class="container svelte-kyctpi"><input type="image" class="svelte-kyctpi"/></div>');function ar(e,t){ke(t,!0);let n=k(!1),i,r=k(""),s=k(oe(t.grid.cellSize)),o=Qt(()=>b(s)/t.width),l,a=!1,u=(f,m,v,E)=>"";Rn(()=>{l.style.zIndex=0,t.imageLoader.onAllLoaded(()=>{a=!0,l.src=t.imageLoader.imageUrls[t.index],I(r,u(i,t.isActive,b(n),a),!0)}),u=(f,m,v,E)=>t.styler?t.styler(f,b(o),t.width,t.height,m,v,E,b(s),l):""}),Ie(()=>{i=t.grid.getPosition(t.grid.getGridCoords(t.index)),I(s,t.grid.cellSize,!0),I(r,u(i,t.isActive,b(n),a),!0)}),t.grid.getPosition(t.grid.getGridCoords(t.index));function c(){I(n,!1)}function d(){}var h=or(),g=ot(h);ae(g,"src",null),g.__click=[rr,t],g.__mouseover=[sr,n],Qi(g,f=>l=f,()=>l),gn(()=>{we(g,b(r)),ae(g,"width",b(s)),ae(g,"height",b(s)*t.height/t.width),ae(g,"alt",t.alt)}),Mt("mouseleave",g,c),Mt("focus",g,d),Je(e,h),Ae()}kn(["click","mouseover"]);const Pe=er(null);function ur(e,t){ke(t,!0);const[n,i]=Mn(),r=()=>Pn(Pe,"$playingStone",n);let s=k(!1);function o(){I(s,t.player.play(t.stone,l),!0),b(s)&&Ht(Pe,{stone:t.stone,index:t.index})}function l(){I(s,!1),r().index===t.index&&Ht(Pe,null)}{let a=Qt(()=>`Stone number ${t.stone.number}`);ar(e,{get file(){return t.stone.image},get index(){return t.index},get grid(){return t.grid},get width(){return t.stone.width},get height(){return t.stone.height},get alt(){return b(a)},onclick:o,get styler(){return t.styler},get cStyler(){return t.cStyler},get isActive(){return b(s)},get imageLoader(){return t.imageLoader}})}Ae(),i()}var lr=Xe("<main></main>");function fr(e,t){const n="#909087",i="#303027";function r(l,a,u,c,d,h,g,f,m){let v="";if(l){const E=l.vCentre-a*c/2;v+=`left: ${l.left}px; top: ${E}px;`,v+=`width: ${f}px;`,m.height=f*c/u,d?(v+=`border-color: ${n};`,v+="opacity: 1;"):h&&(v+=`border-color: ${i};`)}return h&&(v+="filter: contrast(1.2);",v+="filter: brightness(1.2);"),g?v+="opacity: 1;":v+="opacity: 0;",v}function s(l,a,u,c,d,h){let g="";if(l){const f=l.vCentre-a*c/2;g+=`left: ${l.left}px; top: ${f}px;`,g+=`width: ${d}px;`,h.height=d*c/u}return g}var o=lr();jn(o,21,()=>t.stones,An,(l,a,u)=>{ur(l,{get stone(){return b(a)},index:u,get grid(){return t.grid},get player(){return t.player},styler:r,cStyler:s,get imageLoader(){return t.imageLoader}})}),Je(e,o)}const De=[{image:"stone-000.jpg",audio:"Image01.ogg",number:"1",width:840,height:798,gcn:"11191"},{image:"stone-001.jpg",audio:"Image02.ogg",number:"2",width:1043,height:1082,gcn:"11615"},{image:"stone-002.jpg",audio:"Image03.ogg",number:"3",width:950,height:693,gcn:"12138"},{image:"stone-003.jpg",audio:"Image04.ogg",number:"4",width:833,height:867,gcn:"12450"},{image:"stone-004.jpg",audio:"Image05.ogg",number:"5",width:861,height:735,gcn:"12481"},{image:"stone-005.jpg",audio:"Image06.ogg",number:"6",width:863,height:819,gcn:"13056"},{image:"stone-006.jpg",audio:"Image07.ogg",number:"7",width:903,height:922,gcn:"13427"},{image:"stone-007.jpg",audio:"Image08.ogg",number:"8",width:776,height:685,gcn:"13973"},{image:"stone-008.jpg",audio:"Image09.ogg",number:"9",width:903,height:1105,gcn:"14888"},{image:"stone-009.jpg",audio:"Image10.ogg",number:"10",width:880,height:893,gcn:"14889"},{image:"stone-011.jpg",audio:"Image11.ogg",number:"11",width:473,height:553,gcn:"15244"},{image:"stone-012.jpg",audio:"Image12.ogg",number:"12",width:472,height:546,gcn:"15266"},{image:"stone-013.jpg",audio:"Image13.ogg",number:"13",width:476,height:526,gcn:"15286"},{image:"stone-014.jpg",audio:"Image14.ogg",number:"14",width:467,height:533,gcn:"15290"},{image:"stone-015.jpg",audio:"Image15.ogg",number:"15",width:468,height:527,gcn:"15291"},{image:"stone-016.jpg",audio:"Image16.ogg",number:"16",width:883,height:820,gcn:"15292"},{image:"stone-017.jpg",audio:"Image17.ogg",number:"17",width:465,height:513,gcn:"15456"},{image:"stone-018.jpg",audio:"Image18.ogg",number:"18",width:469,height:546,gcn:"15457"},{image:"stone-019.jpg",audio:"Image19.ogg",number:"19",width:807,height:904,gcn:"15828"},{image:"stone-020.jpg",audio:"Image20.ogg",number:"20",width:848,height:848,gcn:"15899"},{image:"stone-021.jpg",audio:"Image21.ogg",number:"21",width:900,height:932,gcn:"15902"},{image:"stone-022.jpg",audio:"Image22.ogg",number:"22",width:469,height:519,gcn:"16000"},{image:"stone-023.jpg",audio:"Image23.ogg",number:"23",width:469,height:524,gcn:"16037"},{image:"stone-024.jpg",audio:"Image24.ogg",number:"24",width:476,height:508,gcn:"16038"},{image:"stone-025.jpg",audio:"Image25.ogg",number:"25",width:476,height:517,gcn:"16039"},{image:"stone-026.jpg",audio:"Image26.ogg",number:"26",width:852,height:810,gcn:"16164"},{image:"stone-027.jpg",audio:"Image27.ogg",number:"27",width:852,height:842,gcn:"16166"},{image:"stone-028.jpg",audio:"Image28.ogg",number:"28",width:686,height:759,gcn:"16300"},{image:"stone-029.jpg",audio:"Image29.ogg",number:"29",width:476,height:528,gcn:"16301"},{image:"stone-030.jpg",audio:"Image30.ogg",number:"30",width:815,height:789,gcn:"16547"},{image:"stone-031.jpg",audio:"Image31.ogg",number:"31",width:859,height:945,gcn:"16720"},{image:"stone-032.jpg",audio:"Image32.ogg",number:"32",width:970,height:806,gcn:"16736"},{image:"stone-033.jpg",audio:"Image33.ogg",number:"33",width:464,height:529,gcn:"18419"},{image:"stone-034.jpg",audio:"Image34.ogg",number:"34",width:412,height:394,gcn:"18421"},{image:"stone-035.jpg",audio:"Image35.ogg",number:"35",width:469,height:537,gcn:"34219"},{image:"stone-036.jpg",audio:"Image36.ogg",number:"36",width:923,height:852,gcn:"34220"},{image:"stone-037.jpg",audio:"Image37.ogg",number:"37",width:920,height:890,gcn:"34201"},{image:"stone-038.jpg",audio:"Image38a.ogg",number:"38a",width:473,height:532,gcn:"34202"},{image:"stone-039.jpg",audio:"Image38b.ogg",number:"38b",width:855,height:861,gcn:"34202"},{image:"stone-040.jpg",audio:"Image39.ogg",number:"39",width:476,height:542,gcn:"34204"},{image:"stone-041.jpg",audio:"Image40.ogg",number:"40",width:497,height:473,gcn:"34206"},{image:"stone-042.jpg",audio:"Image41.ogg",number:"41",width:473,height:537,gcn:"34209"},{image:"stone-043.jpg",audio:"Image42.ogg",number:"42",width:462,height:540,gcn:"34212"},{image:"stone-044.jpg",audio:"Image43.ogg",number:"43",width:465,height:536,gcn:"34214"},{image:"stone-045.jpg",audio:"Image44.ogg",number:"44",width:471,height:506,gcn:"34465"},{image:"stone-046.jpg",audio:"Image45.ogg",number:"45",width:470,height:527,gcn:"34539"},{image:"stone-047.jpg",audio:"Image46.ogg",number:"46",width:1080,height:1089,gcn:"34603"},{image:"stone-048.jpg",audio:"Image47.ogg",number:"47",width:467,height:541,gcn:"34793"},{image:"stone-049.jpg",audio:"Image48.ogg",number:"48",width:877,height:729,gcn:"35875"},{image:"stone-050.jpg",audio:"Image49.ogg",number:"49",width:466,height:526,gcn:"41457"},{image:"stone-051.jpg",audio:"Image50.ogg",number:"50",width:468,height:498,gcn:"41458"},{image:"stone-052.jpg",audio:"Image51.ogg",number:"51",width:844,height:745,gcn:"42366"},{image:"stone-053.jpg",audio:"Image52.ogg",number:"52",width:465,height:548,gcn:"60715"}];class cr{constructor(t,n,i,r,s,o,l){this.width=t,this.height=n,this.columns=i,this.items=r,this.minHEdgePadding=s,this.minVEdgePadding=o,this.gridPadding=l,this.rows=this.getGridCoords(r-1).row+1,this.calculateCellSize()}calculateCellSize(){const t=this.columns-1;this.gapSize=Math.floor(this.height*this.gridPadding);const n=this.width*(2*this.minHEdgePadding)+t*this.gapSize,i=Math.floor((this.width-n)/this.columns),r=this.rows-1,s=this.width*2*this.minVEdgePadding+r*this.gapSize,o=Math.floor((this.height-s)/this.rows);this.cellSize=Math.min(i,o),this.columns*this.cellSize+t*this.gapSize,this.hEdgePadding=Math.floor((this.width-this.columns*this.cellSize-t*this.gapSize)/2),this.vEdgePadding=Math.floor((this.height-this.rows*this.cellSize-r*this.gapSize)/2)}getGridCoords(t){const n=Math.floor(t/this.columns),i=t%this.columns;return{row:n,column:i}}getPosition(t){const{row:n,column:i}=t,r=this.hEdgePadding+i*(this.cellSize+this.gapSize),s=this.vEdgePadding+this.cellSize/2+n*(this.cellSize+this.gapSize);return{left:r,vCentre:s}}}class hr{constructor(t,n,i){const r=`audio/${n.audio}`;this.stoneData=n,this.endedCallback=i,this.ended=!1,this.playing=!1,this.source=t.createBufferSource(),this.source.connect(t.destination),this.request=new XMLHttpRequest,this.request.open("GET",r),this.request.responseType="arraybuffer",this.request.onload=()=>{let s=this.request.response;t.decodeAudioData(s,o=>this.source.buffer=o),this.playing||(this.playing=!0,this.source.start())},this.source.onended=s=>{this.ended=!0,this.endedCallback({e:s,stone:this.stoneData})}}start(){this.request.send()}stop(){this.ended||this.source.stop()}}class gr{constructor(){this.initialised=!1}initialise(){this.audioCtx=new AudioContext}stop(){this.source&&this.source.stop()}play(t,n){return this.stoneData&&this.stoneData.number===t.number&&!this.source.ended?(this.stop(),!1):(this.initialised||(this.initialise(),this.initialised=!0),this.stop(),this.endedCallback=n,this.stoneData=t,this.source=new hr(this.audioCtx,t,n),this.source.start(),!0)}}class dr{constructor(t){this.imageUrls=Array(t.length);let n=0;for(const i of t){const r=n,s=new XMLHttpRequest;s.open("GET",`images/${i.image}`,!0),s.responseType="arraybuffer",s.onload=o=>{const l=new Uint8Array(s.response),a=new Blob([l],{type:"image/jpeg"}),c=(window.URL||window.webkitURL).createObjectURL(a);this.onloaded(r,c)},s.send(),n++}this.loadedCount=0,this.timerStart=Date.now().valueOf(),this.callbacks=[]}onloaded(t,n){this.imageUrls[t]=n,this.loadedCount++,this.loadedCount===this.imageUrls.length&&(console.log(`All loaded in ${Date.now().valueOf()-this.timerStart}ms`),this.callbacks.forEach(i=>i()))}onAllLoaded(t){this.callbacks.push(t)}}class vr{constructor(t,n,i=.97,r){this.containerWidth=t,this.containerHeight=n,this.maxImageSizeRatio=i,this.maxImageWidth=r}setElementDimensions(t,n){this.elementDimensions={width:t,height:n},this.setScale(),this.height=this.scale*this.elementDimensions.height,this.width=this.scale*this.elementDimensions.width}setScale(){const t=this.getMaxImageToContainerRatio();t>this.maxImageSizeRatio?this.scale=this.maxImageSizeRatio/t:this.scale=1,this.scale*this.elementDimensions.width>this.maxImageWidth&&(this.scale=this.scale*this.maxImageWidth/(this.scale*this.elementDimensions.width))}getOffsets(){const t=(this.containerWidth-this.scale*this.elementDimensions.width)/2,n=(this.containerHeight-this.height)/2;return{left:t,top:n}}getOffsetCSS(){if(!this.elementDimensions)return"";const t=this.getOffsets();return`left: ${t.left}px; top: ${t.top}px;`}getDimensionsCSS(){return this.elementDimensions?`width: ${this.width}px; height: ${this.height}px`:""}getMaxImageToContainerRatio(){const t=this.elementDimensions.width/this.containerWidth,n=this.elementDimensions.height/this.containerHeight;return Math.max(t,n)}}function mr(e,t){t.player.stop()}var _r=Xe('<div class="container svelte-1398z25"><img class="svelte-1398z25"/> <div class="cancel-text svelte-1398z25" role="none">×</div> <div class="gcn svelte-1398z25"> </div></div>');function pr(e,t){ke(t,!0);const[n,i]=Mn(),r=()=>Pn(Pe,"$playingStone",n),s=1e3;let o=k(""),l=k(""),a=k(""),u=k(""),c=k(null);const d=`Stone number ${t.stone.number}`,h=new vr(t.windowWidth,t.windowHeight,void 0,412);h.setElementDimensions(t.stone.width,t.stone.height),I(o,h.getOffsetCSS(),!0),Rn(()=>{t.imageLoader.onAllLoaded(()=>{I(c,t.imageLoader.imageUrls[t.index],!0)}),I(o,`width: ${h.width}px; height: ${h.height}px`),I(a,`left: ${h.width-30}px; top: 0px`);let P=h.height-100;I(u,`top: ${P}px`)});function g(){v(),setTimeout(E)}function f(){v(),setTimeout(m,s)}function m(){I(o,`transition: ${s/1e3}s ease-in-out;display: none;`+h.getOffsetCSS()+h.getDimensionsCSS())}function v(){I(o,`transition: ${s/1e3}s ease-in-out;display: inline-block;opacity: 0;`+h.getOffsetCSS()+h.getDimensionsCSS())}function E(){I(o,`transition: ${s/1e3}s ease-in-out;display: inline-block;opacity: 1;`+h.getOffsetCSS()+h.getDimensionsCSS())}function S(P){I(l,h.getDimensionsCSS(),!0),P===null?f():P.index===t.index?g():f()}Ie(()=>{S(r())});var C=_r(),A=ot(C),x=at(A,2);x.__click=[mr,t];var w=at(x,2),y=ot(w);gn(()=>{we(C,b(o)),we(A,b(l)),ae(A,"src",b(c)),ae(A,"alt",d),we(x,b(a)),we(w,b(u)),Hi(y,`#${t.stone.gcn??""}`)}),Je(e,C),Ae(),i()}kn(["click"]);var wr=Xe("<!> <!>",1);function br(e,t){ke(t,!1);const n=new dr(De);let i=document.body.clientWidth,r=document.body.clientHeight;const s=new cr(i,r,9,De.length,.01,.02,.03),o=new gr;$i();var l=wr(),a=yi(l);fr(a,{get stones(){return De},get grid(){return s},get imageLoader(){return n},get player(){return o}});var u=at(a,2);jn(u,1,()=>De,An,(c,d,h)=>{pr(c,{index:h,get stone(){return b(d)},get imageLoader(){return n},get windowWidth(){return i},get windowHeight(){return r},get player(){return o}})}),Je(e,l),Ae()}Ui(br,{target:document.getElementById("app")});
