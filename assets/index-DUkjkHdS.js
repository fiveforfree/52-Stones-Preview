(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();const hi=!1;var Tt=Array.isArray,Mn=Array.prototype.indexOf,At=Array.from,Je=Object.defineProperty,Oe=Object.getOwnPropertyDescriptor,Dn=Object.getOwnPropertyDescriptors,On=Object.prototype,Hn=Array.prototype,vi=Object.getPrototypeOf,ei=Object.isExtensible;const fe=()=>{};function _i(e){for(var t=0;t<e.length;t++)e[t]()}function Rn(){var e,t,i=new Promise((n,r)=>{e=n,t=r});return{promise:i,resolve:e,reject:t}}const W=2,jt=4,qt=8,Te=16,ie=32,_e=64,mi=128,U=256,Ze=512,D=1024,V=2048,le=4096,X=8192,Ae=16384,Lt=32768,nt=65536,ti=1<<17,Gn=1<<18,Fe=1<<19,zn=1<<20,St=1<<21,Mt=1<<22,ge=1<<23,Be=Symbol("$state"),Wn=Symbol(""),Dt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Nn(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function Fn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Un(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Vn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Bn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Yn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Xn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Kn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Jn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Zn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const rt=1,st=2,pi=4,Qn=8,$n=16,er=1,tr=2,M=Symbol(),ir="http://www.w3.org/1999/xhtml";let nr=!1;function wi(e){return e===this.v}function bi(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function yi(e){return!bi(e,this.v)}let rr=!1,B=null;function Qe(e){B=e}function me(e,t=!1,i){B={p:B,c:null,e:null,s:e,x:null,l:null}}function pe(e){var t=B,i=t.e;if(i!==null){t.e=null;for(var n of i)Ri(n)}return B=t.p,{}}function Si(){return!0}const sr=new WeakMap;function ar(e){var t=P;if(t===null)return I.f|=ge,e;if((t.f&Lt)===0){if((t.f&mi)===0)throw!t.parent&&e instanceof Error&&Ei(e),e;t.b.error(e)}else Ot(e,t)}function Ot(e,t){for(;t!==null;){if((t.f&mi)!==0)try{t.b.error(e);return}catch(i){e=i}t=t.parent}throw e instanceof Error&&Ei(e),e}function Ei(e){const t=sr.get(e);t&&(Je(e,"message",{value:t.message}),Je(e,"stack",{value:t.stack}))}let Re=[],Et=[];function xi(){var e=Re;Re=[],_i(e)}function or(){var e=Et;Et=[],_i(e)}function Ht(e){Re.length===0&&queueMicrotask(xi),Re.push(e)}function lr(){Re.length>0&&xi(),Et.length>0&&or()}function ur(){for(var e=P.b;e!==null&&!e.has_pending_snippet();)e=e.parent;return e===null&&Nn(),e}function Rt(e){var t=W|V,i=I!==null&&(I.f&W)!==0?I:null;return P===null||i!==null&&(i.f&U)!==0?t|=U:P.f|=Fe,{ctx:B,deps:null,effects:null,equals:wi,f:t,fn:e,reactions:null,rv:0,v:M,wv:0,parent:i??P,ac:null}}function cr(e,t){let i=P;i===null&&Un();var n=i.b,r=void 0,s=Ge(M),a=null,l=!I;return kr(()=>{try{var o=e();a&&Promise.resolve(o).catch(()=>{})}catch(c){o=Promise.reject(c)}var u=()=>o;r=a?.then(u,u)??Promise.resolve(o),a=r;var g=j,h=n.pending;l&&(n.update_pending_count(1),h||g.increment());const v=(c,d=void 0)=>{a=null,h||g.activate(),d?d!==Dt&&(s.f|=ge,ze(s,d)):((s.f&ge)!==0&&(s.f^=ge),ze(s,c)),l&&(n.update_pending_count(-1),h||g.decrement()),Pi()};if(r.then(v,c=>v(null,c||"unknown")),g)return()=>{queueMicrotask(()=>g.neuter())}}),new Promise(o=>{function u(g){function h(){g===r?o(s):u(r)}g.then(h,h)}u(r)})}function at(e){const t=Rt(e);return Vi(t),t}function dr(e){const t=Rt(e);return t.equals=yi,t}function Ii(e){var t=e.effects;if(t!==null){e.effects=null;for(var i=0;i<t.length;i+=1)Q(t[i])}}function fr(e){for(var t=e.parent;t!==null;){if((t.f&W)===0)return t;t=t.parent}return null}function Gt(e){var t,i=P;ae(fr(e));try{Ii(e),t=Ki(e)}finally{ae(i)}return t}function ki(e){var t=Gt(e);if(e.equals(t)||(e.v=t,e.wv=Yi()),!je){var i=(re||(e.f&U)!==0)&&e.deps!==null?le:D;R(e,i)}}function gr(e,t,i){const n=Rt;if(t.length===0){i(e.map(n));return}var r=j,s=P,a=hr(),l=ur();Promise.all(t.map(o=>cr(o))).then(o=>{r?.activate(),a();try{i([...e.map(n),...o])}catch(u){(s.f&Ae)===0&&Ot(u,s)}r?.deactivate(),Pi()}).catch(o=>{l.error(o)})}function hr(){var e=P,t=I,i=B,n=j;return function(){ae(e),$(t),Qe(i),n?.activate()}}function Pi(){ae(null),$(null),Qe(null)}const _t=new Set;let j=null,Ye=null,ii=new Set,$e=[];function Ci(){const e=$e.shift();$e.length>0&&queueMicrotask(Ci),e()}let ve=[],ot=null,xt=!1,Xe=!1;class Ie{current=new Map;#l=new Map;#r=new Set;#e=0;#u=null;#c=!1;#i=[];#s=[];#n=[];#t=[];#a=[];#d=[];#f=[];skipped_effects=new Set;process(t){ve=[],Ye=null;for(const r of t)this.#h(r);if(this.#i.length===0&&this.#e===0){this.#g();var i=this.#n,n=this.#t;this.#n=[],this.#t=[],this.#a=[],Ye=j,j=null,ni(i),ni(n),j===null?j=this:_t.delete(this),this.#u?.resolve()}else this.#o(this.#n),this.#o(this.#t),this.#o(this.#a);for(const r of this.#i)xe(r);for(const r of this.#s)xe(r);this.#i=[],this.#s=[]}#h(t){t.f^=D;for(var i=t.first;i!==null;){var n=i.f,r=(n&(ie|_e))!==0,s=r&&(n&D)!==0,a=s||(n&X)!==0||this.skipped_effects.has(i);if(!a&&i.fn!==null){if(r)i.f^=D;else if((n&jt)!==0)this.#t.push(i);else if((n&D)===0)if((n&Mt)!==0){var l=i.b?.pending?this.#s:this.#i;l.push(i)}else ft(i)&&((i.f&Te)!==0&&this.#a.push(i),xe(i));var o=i.first;if(o!==null){i=o;continue}}var u=i.parent;for(i=i.next;i===null&&u!==null;)i=u.next,u=u.parent}}#o(t){for(const i of t)((i.f&V)!==0?this.#d:this.#f).push(i),R(i,D);t.length=0}capture(t,i){this.#l.has(t)||this.#l.set(t,i),this.current.set(t,t.v)}activate(){j=this}deactivate(){j=null,Ye=null;for(const t of ii)if(ii.delete(t),t(),j!==null)break}neuter(){this.#c=!0}flush(){ve.length>0?Ti():this.#g(),j===this&&(this.#e===0&&_t.delete(this),this.deactivate())}#g(){if(!this.#c)for(const t of this.#r)t();this.#r.clear()}increment(){this.#e+=1}decrement(){if(this.#e-=1,this.#e===0){for(const t of this.#d)R(t,V),ke(t);for(const t of this.#f)R(t,le),ke(t);this.#n=[],this.#t=[],this.flush()}else this.deactivate()}add_callback(t){this.#r.add(t)}settled(){return(this.#u??=Rn()).promise}static ensure(){if(j===null){const t=j=new Ie;_t.add(j),Xe||Ie.enqueue(()=>{j===t&&t.flush()})}return j}static enqueue(t){$e.length===0&&queueMicrotask(Ci),$e.unshift(t)}}function vr(e){var t=Xe;Xe=!0;try{for(var i;;){if(lr(),ve.length===0&&(j?.flush(),ve.length===0))return ot=null,i;Ti()}}finally{Xe=t}}function Ti(){var e=Ee;xt=!0;try{var t=0;for(ai(!0);ve.length>0;){var i=Ie.ensure();if(t++>1e3){var n,r;_r()}i.process(ve),se.clear()}}finally{xt=!1,ai(e),ot=null}}function _r(){try{Xn()}catch(e){Ot(e,ot)}}let ce=null;function ni(e){var t=e.length;if(t!==0){for(var i=0;i<t;){var n=e[i++];if((n.f&(Ae|X))===0&&ft(n)&&(ce=[],xe(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?Ni(n):n.fn=null),ce?.length>0)){se.clear();for(const r of ce)xe(r);ce=[]}}ce=null}}function ke(e){for(var t=ot=e;t.parent!==null;){t=t.parent;var i=t.f;if(xt&&t===P&&(i&Te)!==0)return;if((i&(_e|ie))!==0){if((i&D)===0)return;t.f^=D}}ve.push(t)}const se=new Map;function Ge(e,t){var i={f:0,v:e,reactions:null,equals:wi,rv:0,wv:0};return i}function C(e,t){const i=Ge(e);return Vi(i),i}function Ai(e,t=!1,i=!0){const n=Ge(e);return t||(n.equals=yi),n}function m(e,t,i=!1){I!==null&&(!Z||(I.f&ti)!==0)&&Si()&&(I.f&(W|Te|Mt|ti))!==0&&!te?.includes(e)&&Zn();let n=i?F(t):t;return ze(e,n)}function ze(e,t){if(!e.equals(t)){var i=e.v;je?se.set(e,t):se.set(e,i),e.v=t;var n=Ie.ensure();n.capture(e,i),(e.f&W)!==0&&((e.f&V)!==0&&Gt(e),R(e,(e.f&U)===0?D:le)),e.wv=Yi(),ji(e,V),P!==null&&(P.f&D)!==0&&(P.f&(ie|_e))===0&&(N===null?Tr([e]):N.push(e))}return t}function mr(e,t=1){var i=f(e),n=t===1?i++:i--;return m(e,i),n}function mt(e){m(e,e.v+1)}function ji(e,t){var i=e.reactions;if(i!==null)for(var n=i.length,r=0;r<n;r++){var s=i[r],a=s.f,l=(a&V)===0;l&&R(s,t),(a&W)!==0?ji(s,le):l&&((a&Te)!==0&&ce!==null&&ce.push(s),ke(s))}}function F(e){if(typeof e!="object"||e===null||Be in e)return e;const t=vi(e);if(t!==On&&t!==Hn)return e;var i=new Map,n=Tt(e),r=C(0),s=he,a=l=>{if(he===s)return l();var o=I,u=he;$(null),li(s);var g=l();return $(o),li(u),g};return n&&i.set("length",C(e.length)),new Proxy(e,{defineProperty(l,o,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Kn();var g=i.get(o);return g===void 0?g=a(()=>{var h=C(u.value);return i.set(o,h),h}):m(g,u.value,!0),!0},deleteProperty(l,o){var u=i.get(o);if(u===void 0){if(o in l){const g=a(()=>C(M));i.set(o,g),mt(r)}}else m(u,M),mt(r);return!0},get(l,o,u){if(o===Be)return e;var g=i.get(o),h=o in l;if(g===void 0&&(!h||Oe(l,o)?.writable)&&(g=a(()=>{var c=F(h?l[o]:M),d=C(c);return d}),i.set(o,g)),g!==void 0){var v=f(g);return v===M?void 0:v}return Reflect.get(l,o,u)},getOwnPropertyDescriptor(l,o){var u=Reflect.getOwnPropertyDescriptor(l,o);if(u&&"value"in u){var g=i.get(o);g&&(u.value=f(g))}else if(u===void 0){var h=i.get(o),v=h?.v;if(h!==void 0&&v!==M)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return u},has(l,o){if(o===Be)return!0;var u=i.get(o),g=u!==void 0&&u.v!==M||Reflect.has(l,o);if(u!==void 0||P!==null&&(!g||Oe(l,o)?.writable)){u===void 0&&(u=a(()=>{var v=g?F(l[o]):M,c=C(v);return c}),i.set(o,u));var h=f(u);if(h===M)return!1}return g},set(l,o,u,g){var h=i.get(o),v=o in l;if(n&&o==="length")for(var c=u;c<h.v;c+=1){var d=i.get(c+"");d!==void 0?m(d,M):c in l&&(d=a(()=>C(M)),i.set(c+"",d))}if(h===void 0)(!v||Oe(l,o)?.writable)&&(h=a(()=>C(void 0)),m(h,F(u)),i.set(o,h));else{v=h.v!==M;var _=a(()=>F(u));m(h,_)}var p=Reflect.getOwnPropertyDescriptor(l,o);if(p?.set&&p.set.call(g,u),!v){if(n&&typeof o=="string"){var E=i.get("length"),y=Number(o);Number.isInteger(y)&&y>=E.v&&m(E,y+1)}mt(r)}return!0},ownKeys(l){f(r);var o=Reflect.ownKeys(l).filter(h=>{var v=i.get(h);return v===void 0||v.v!==M});for(var[u,g]of i)g.v!==M&&!(u in l)&&o.push(u);return o},setPrototypeOf(){Jn()}})}var ri,qi,Li,Mi;function pr(){if(ri===void 0){ri=window,qi=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,i=Text.prototype;Li=Oe(t,"firstChild").get,Mi=Oe(t,"nextSibling").get,ei(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ei(i)&&(i.__t=void 0)}}function lt(e=""){return document.createTextNode(e)}function et(e){return Li.call(e)}function ut(e){return Mi.call(e)}function k(e,t){return et(e)}function Di(e,t){{var i=et(e);return i instanceof Comment&&i.data===""?ut(i):i}}function w(e,t=1,i=!1){let n=e;for(;t--;)n=ut(n);return n}function wr(e){e.textContent=""}function Oi(){return!1}let si=!1;function br(){si||(si=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function ct(e){var t=I,i=P;$(null),ae(null);try{return e()}finally{$(t),ae(i)}}function yr(e,t,i,n=i){e.addEventListener(t,()=>ct(i));const r=e.__on_r;r?e.__on_r=()=>{r(),n(!0)}:e.__on_r=()=>n(!0),br()}function Sr(e){P===null&&I===null&&Yn(),I!==null&&(I.f&U)!==0&&P===null&&Bn(),je&&Vn()}function Er(e,t){var i=t.last;i===null?t.last=t.first=e:(i.next=e,e.prev=i,t.last=e)}function ne(e,t,i,n=!0){var r=P;r!==null&&(r.f&X)!==0&&(e|=X);var s={ctx:B,deps:null,nodes_start:null,nodes_end:null,f:e|V,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(i)try{xe(s),s.f|=Lt}catch(o){throw Q(s),o}else t!==null&&ke(s);if(n){var a=s;if(i&&a.deps===null&&a.teardown===null&&a.nodes_start===null&&a.first===a.last&&(a.f&Fe)===0&&(a=a.first),a!==null&&(a.parent=r,r!==null&&Er(a,r),I!==null&&(I.f&W)!==0&&(e&_e)===0)){var l=I;(l.effects??=[]).push(a)}}return s}function Hi(e){const t=ne(qt,null,!1);return R(t,D),t.teardown=e,t}function Pe(e){Sr();var t=P.f,i=!I&&(t&ie)!==0&&(t&Lt)===0;if(i){var n=B;(n.e??=[]).push(e)}else return Ri(e)}function Ri(e){return ne(jt|zn,e,!1)}function xr(e){Ie.ensure();const t=ne(_e|Fe,e,!0);return(i={})=>new Promise(n=>{i.outro?Wt(t,()=>{Q(t),n(void 0)}):(Q(t),n(void 0))})}function Ir(e){return ne(jt,e,!1)}function kr(e){return ne(Mt|Fe,e,!0)}function Gi(e,t=0){return ne(qt|t,e,!0)}function dt(e,t=[],i=[]){gr(t,i,n=>{ne(qt,()=>e(...n.map(f)),!0)})}function zt(e,t=0){var i=ne(Te|t,e,!0);return i}function Ce(e,t=!0){return ne(ie|Fe,e,!0,t)}function zi(e){var t=e.teardown;if(t!==null){const i=je,n=I;oi(!0),$(null);try{t.call(null)}finally{oi(i),$(n)}}}function Wi(e,t=!1){var i=e.first;for(e.first=e.last=null;i!==null;){const r=i.ac;r!==null&&ct(()=>{r.abort(Dt)});var n=i.next;(i.f&_e)!==0?i.parent=null:Q(i,t),i=n}}function Pr(e){for(var t=e.first;t!==null;){var i=t.next;(t.f&ie)===0&&Q(t),t=i}}function Q(e,t=!0){var i=!1;(t||(e.f&Gn)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Cr(e.nodes_start,e.nodes_end),i=!0),Wi(e,t&&!i),tt(e,0),R(e,Ae);var n=e.transitions;if(n!==null)for(const s of n)s.stop();zi(e);var r=e.parent;r!==null&&r.first!==null&&Ni(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Cr(e,t){for(;e!==null;){var i=e===t?null:ut(e);e.remove(),e=i}}function Ni(e){var t=e.parent,i=e.prev,n=e.next;i!==null&&(i.next=n),n!==null&&(n.prev=i),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=i))}function Wt(e,t){var i=[];Nt(e,i,!0),Fi(i,()=>{Q(e),t&&t()})}function Fi(e,t){var i=e.length;if(i>0){var n=()=>--i||t();for(var r of e)r.out(n)}else t()}function Nt(e,t,i){if((e.f&X)===0){if(e.f^=X,e.transitions!==null)for(const a of e.transitions)(a.is_global||i)&&t.push(a);for(var n=e.first;n!==null;){var r=n.next,s=(n.f&nt)!==0||(n.f&ie)!==0;Nt(n,t,s?i:!1),n=r}}}function Ft(e){Ui(e,!0)}function Ui(e,t){if((e.f&X)!==0){e.f^=X,(e.f&D)===0&&(R(e,V),ke(e));for(var i=e.first;i!==null;){var n=i.next,r=(i.f&nt)!==0||(i.f&ie)!==0;Ui(i,r?t:!1),i=n}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}let Ee=!1;function ai(e){Ee=e}let je=!1;function oi(e){je=e}let I=null,Z=!1;function $(e){I=e}let P=null;function ae(e){P=e}let te=null;function Vi(e){I!==null&&(te===null?te=[e]:te.push(e))}let H=null,z=0,N=null;function Tr(e){N=e}let Bi=1,We=0,he=We;function li(e){he=e}let re=!1;function Yi(){return++Bi}function ft(e){var t=e.f;if((t&V)!==0)return!0;if((t&le)!==0){var i=e.deps,n=(t&U)!==0;if(i!==null){var r,s,a=(t&Ze)!==0,l=n&&P!==null&&!re,o=i.length;if((a||l)&&(P===null||(P.f&Ae)===0)){var u=e,g=u.parent;for(r=0;r<o;r++)s=i[r],(a||!s?.reactions?.includes(u))&&(s.reactions??=[]).push(u);a&&(u.f^=Ze),l&&g!==null&&(g.f&U)===0&&(u.f^=U)}for(r=0;r<o;r++)if(s=i[r],ft(s)&&ki(s),s.wv>e.wv)return!0}(!n||P!==null&&!re)&&R(e,D)}return!1}function Xi(e,t,i=!0){var n=e.reactions;if(n!==null&&!te?.includes(e))for(var r=0;r<n.length;r++){var s=n[r];(s.f&W)!==0?Xi(s,t,!1):t===s&&(i?R(s,V):(s.f&D)!==0&&R(s,le),ke(s))}}function Ki(e){var t=H,i=z,n=N,r=I,s=re,a=te,l=B,o=Z,u=he,g=e.f;H=null,z=0,N=null,re=(g&U)!==0&&(Z||!Ee||I===null),I=(g&(ie|_e))===0?e:null,te=null,Qe(e.ctx),Z=!1,he=++We,e.ac!==null&&(ct(()=>{e.ac.abort(Dt)}),e.ac=null);try{e.f|=St;var h=e.fn,v=h(),c=e.deps;if(H!==null){var d;if(tt(e,z),c!==null&&z>0)for(c.length=z+H.length,d=0;d<H.length;d++)c[z+d]=H[d];else e.deps=c=H;if(!re||(g&W)!==0&&e.reactions!==null)for(d=z;d<c.length;d++)(c[d].reactions??=[]).push(e)}else c!==null&&z<c.length&&(tt(e,z),c.length=z);if(Si()&&N!==null&&!Z&&c!==null&&(e.f&(W|le|V))===0)for(d=0;d<N.length;d++)Xi(N[d],e);return r!==null&&r!==e&&(We++,N!==null&&(n===null?n=N:n.push(...N))),(e.f&ge)!==0&&(e.f^=ge),v}catch(_){return ar(_)}finally{e.f^=St,H=t,z=i,N=n,I=r,re=s,te=a,Qe(l),Z=o,he=u}}function Ar(e,t){let i=t.reactions;if(i!==null){var n=Mn.call(i,e);if(n!==-1){var r=i.length-1;r===0?i=t.reactions=null:(i[n]=i[r],i.pop())}}i===null&&(t.f&W)!==0&&(H===null||!H.includes(t))&&(R(t,le),(t.f&(U|Ze))===0&&(t.f^=Ze),Ii(t),tt(t,0))}function tt(e,t){var i=e.deps;if(i!==null)for(var n=t;n<i.length;n++)Ar(e,i[n])}function xe(e){var t=e.f;if((t&Ae)===0){R(e,D);var i=P,n=Ee;P=e,Ee=!0;try{(t&Te)!==0?Pr(e):Wi(e),zi(e);var r=Ki(e);e.teardown=typeof r=="function"?r:null,e.wv=Bi;var s;hi&&rr&&(e.f&V)!==0&&e.deps}finally{Ee=n,P=i}}}async function jr(){await Promise.resolve(),vr()}function f(e){var t=e.f,i=(t&W)!==0;if(I!==null&&!Z){var n=P!==null&&(P.f&Ae)!==0;if(!n&&!te?.includes(e)){var r=I.deps;if((I.f&St)!==0)e.rv<We&&(e.rv=We,H===null&&r!==null&&r[z]===e?z++:H===null?H=[e]:(!re||!H.includes(e))&&H.push(e));else{(I.deps??=[]).push(e);var s=e.reactions;s===null?e.reactions=[I]:s.includes(I)||s.push(I)}}}else if(i&&e.deps===null&&e.effects===null){var a=e,l=a.parent;l!==null&&(l.f&U)===0&&(a.f^=U)}if(je){if(se.has(e))return se.get(e);if(i){a=e;var o=a.v;return((a.f&D)===0&&a.reactions!==null||Ji(a))&&(o=Gt(a)),se.set(a,o),o}}else i&&(a=e,ft(a)&&ki(a));if((e.f&ge)!==0)throw e.v;return e.v}function Ji(e){if(e.v===M)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(se.has(t)||(t.f&W)!==0&&Ji(t))return!0;return!1}function gt(e){var t=Z;try{return Z=!0,e()}finally{Z=t}}const qr=-7169;function R(e,t){e.f=e.f&qr|t}const Lr=["touchstart","touchmove"];function Mr(e){return Lr.includes(e)}const Zi=new Set,It=new Set;function Dr(e,t,i,n={}){function r(s){if(n.capture||De.call(t,s),!s.cancelBubble)return ct(()=>i?.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Ht(()=>{t.addEventListener(e,r,n)}):t.addEventListener(e,r,n),r}function it(e,t,i,n,r){var s={capture:n,passive:r},a=Dr(e,t,i,s);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Hi(()=>{t.removeEventListener(e,a,s)})}function qe(e){for(var t=0;t<e.length;t++)Zi.add(e[t]);for(var i of It)i(e)}let ui=null;function De(e){var t=this,i=t.ownerDocument,n=e.type,r=e.composedPath?.()||[],s=r[0]||e.target;ui=e;var a=0,l=ui===e&&e.__root;if(l){var o=r.indexOf(l);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var u=r.indexOf(t);if(u===-1)return;o<=u&&(a=o)}if(s=r[a]||e.target,s!==t){Je(e,"currentTarget",{configurable:!0,get(){return s||i}});var g=I,h=P;$(null),ae(null);try{for(var v,c=[];s!==null;){var d=s.assignedSlot||s.parentNode||s.host||null;try{var _=s["__"+n];if(_!=null&&(!s.disabled||e.target===s))if(Tt(_)){var[p,...E]=_;p.apply(s,[e,...E])}else _.call(s,e)}catch(y){v?c.push(y):v=y}if(e.cancelBubble||d===t||d===null)break;s=d}if(v){for(let y of c)queueMicrotask(()=>{throw y});throw v}}finally{e.__root=t,delete e.currentTarget,$(g),ae(h)}}}function Or(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function ci(e,t){var i=P;i.nodes_start===null&&(i.nodes_start=e,i.nodes_end=t)}function ue(e,t){var i=(t&er)!==0,n=(t&tr)!==0,r,s=!e.startsWith("<!>");return()=>{r===void 0&&(r=Or(s?e:"<!>"+e),i||(r=et(r)));var a=n||qi?document.importNode(r,!0):r.cloneNode(!0);if(i){var l=et(a),o=a.lastChild;ci(l,o)}else ci(a,a);return a}}function oe(e,t){e!==null&&e.before(t)}function K(e,t){var i=t==null?"":typeof t=="object"?t+"":t;i!==(e.__t??=e.nodeValue)&&(e.__t=i,e.nodeValue=i+"")}function Hr(e,t){return Rr(e,t)}const be=new Map;function Rr(e,{target:t,anchor:i,props:n={},events:r,context:s,intro:a=!0}){pr();var l=new Set,o=h=>{for(var v=0;v<h.length;v++){var c=h[v];if(!l.has(c)){l.add(c);var d=Mr(c);t.addEventListener(c,De,{passive:d});var _=be.get(c);_===void 0?(document.addEventListener(c,De,{passive:d}),be.set(c,1)):be.set(c,_+1)}}};o(At(Zi)),It.add(o);var u=void 0,g=xr(()=>{var h=i??t.appendChild(lt());return Ce(()=>{if(s){me({});var v=B;v.c=s}r&&(n.$$events=r),u=e(h,n)||{},s&&pe()}),()=>{for(var v of l){t.removeEventListener(v,De);var c=be.get(v);--c===0?(document.removeEventListener(v,De),be.delete(v)):be.set(v,c)}It.delete(o),h!==i&&h.parentNode?.removeChild(h)}});return Gr.set(u,g),u}let Gr=new WeakMap;function kt(e,t,i=!1){var n=e,r=null,s=null,a=M,l=i?nt:0,o=!1;const u=(c,d=!0)=>{o=!0,v(d,c)};var g=null;function h(){g!==null&&(g.lastChild.remove(),n.before(g),g=null);var c=a?r:s,d=a?s:r;c&&Ft(c),d&&Wt(d,()=>{a?s=null:r=null})}const v=(c,d)=>{if(a!==(a=c)){var _=Oi(),p=n;if(_&&(g=document.createDocumentFragment(),g.append(p=lt())),a?r??=d&&Ce(()=>d(p)):s??=d&&Ce(()=>d(p)),_){var E=j,y=a?r:s,b=a?s:r;y&&E.skipped_effects.delete(y),b&&E.skipped_effects.add(b),E.add_callback(h)}else h()}};zt(()=>{o=!1,t(u),o||v(null,null)},l)}function Qi(e,t){return t}function zr(e,t,i){for(var n=e.items,r=[],s=t.length,a=0;a<s;a++)Nt(t[a].e,r,!0);var l=s>0&&r.length===0&&i!==null;if(l){var o=i.parentNode;wr(o),o.append(i),n.clear(),J(e,t[0].prev,t[s-1].next)}Fi(r,()=>{for(var u=0;u<s;u++){var g=t[u];l||(n.delete(g.k),J(e,g.prev,g.next)),Q(g.e,!l)}})}function $i(e,t,i,n,r,s=null){var a=e,l={flags:t,items:new Map,first:null},o=(t&pi)!==0;if(o){var u=e;a=u.appendChild(lt())}var g=null,h=!1,v=new Map,c=dr(()=>{var E=i();return Tt(E)?E:E==null?[]:At(E)}),d,_;function p(){Wr(_,d,l,v,a,r,t,n,i),s!==null&&(d.length===0?g?Ft(g):g=Ce(()=>s(a)):g!==null&&Wt(g,()=>{g=null}))}zt(()=>{_??=P,d=f(c);var E=d.length;if(!(h&&E===0)){h=E===0;var y,b,A,T;if(Oi()){var S=new Set,x=j;for(b=0;b<E;b+=1){A=d[b],T=n(A,b);var G=l.items.get(T)??v.get(T);G?(t&(rt|st))!==0&&en(G,A,b,t):(y=tn(null,l,null,null,A,T,b,r,t,i,!0),v.set(T,y)),S.add(T)}for(const[ee,O]of l.items)S.has(ee)||x.skipped_effects.add(O.e);x.add_callback(p)}else p();f(c)}})}function Wr(e,t,i,n,r,s,a,l,o){var u=(a&Qn)!==0,g=(a&(rt|st))!==0,h=t.length,v=i.items,c=i.first,d=c,_,p=null,E,y=[],b=[],A,T,S,x;if(u)for(x=0;x<h;x+=1)A=t[x],T=l(A,x),S=v.get(T),S!==void 0&&(S.a?.measure(),(E??=new Set).add(S));for(x=0;x<h;x+=1){if(A=t[x],T=l(A,x),S=v.get(T),S===void 0){var G=n.get(T);if(G!==void 0){n.delete(T),v.set(T,G);var ee=p?p.next:d;J(i,p,G),J(i,G,ee),pt(G,ee,r),p=G}else{var O=d?d.e.nodes_start:r;p=tn(O,i,p,p===null?i.first:p.next,A,T,x,s,a,o)}v.set(T,p),y=[],b=[],d=p.next;continue}if(g&&en(S,A,x,a),(S.e.f&X)!==0&&(Ft(S.e),u&&(S.a?.unfix(),(E??=new Set).delete(S))),S!==d){if(_!==void 0&&_.has(S)){if(y.length<b.length){var L=b[0],Y;p=L.prev;var Ue=y[0],Le=y[y.length-1];for(Y=0;Y<y.length;Y+=1)pt(y[Y],L,r);for(Y=0;Y<b.length;Y+=1)_.delete(b[Y]);J(i,Ue.prev,Le.next),J(i,p,Ue),J(i,Le,L),d=L,p=Le,x-=1,y=[],b=[]}else _.delete(S),pt(S,d,r),J(i,S.prev,S.next),J(i,S,p===null?i.first:p.next),J(i,p,S),p=S;continue}for(y=[],b=[];d!==null&&d.k!==T;)(d.e.f&X)===0&&(_??=new Set).add(d),b.push(d),d=d.next;if(d===null)continue;S=d}y.push(S),p=S,d=S.next}if(d!==null||_!==void 0){for(var q=_===void 0?[]:At(_);d!==null;)(d.e.f&X)===0&&q.push(d),d=d.next;var we=q.length;if(we>0){var Ve=(a&pi)!==0&&h===0?r:null;if(u){for(x=0;x<we;x+=1)q[x].a?.measure();for(x=0;x<we;x+=1)q[x].a?.fix()}zr(i,q,Ve)}}u&&Ht(()=>{if(E!==void 0)for(S of E)S.a?.apply()}),e.first=i.first&&i.first.e,e.last=p&&p.e;for(var vt of n.values())Q(vt.e);n.clear()}function en(e,t,i,n){(n&rt)!==0&&ze(e.v,t),(n&st)!==0?ze(e.i,i):e.i=i}function tn(e,t,i,n,r,s,a,l,o,u,g){var h=(o&rt)!==0,v=(o&$n)===0,c=h?v?Ai(r,!1,!1):Ge(r):r,d=(o&st)===0?a:Ge(a),_={i:d,v:c,k:s,a:null,e:null,prev:i,next:n};try{if(e===null){var p=document.createDocumentFragment();p.append(e=lt())}return _.e=Ce(()=>l(e,c,d,u),nr),_.e.prev=i&&i.e,_.e.next=n&&n.e,i===null?g||(t.first=_):(i.next=_,i.e.next=_.e),n!==null&&(n.prev=_,n.e.prev=_.e),_}finally{}}function pt(e,t,i){for(var n=e.next?e.next.e.nodes_start:i,r=t?t.e.nodes_start:i,s=e.e.nodes_start;s!==null&&s!==n;){var a=ut(s);r.before(s),s=a}}function J(e,t,i){t===null?e.first=i:(t.next=i,t.e.next=i&&i.e),i!==null&&(i.prev=t,i.e.prev=t&&t.e)}function Nr(e,t,...i){var n=e,r=fe,s;zt(()=>{r!==(r=t())&&(s&&(Q(s),s=null),s=Ce(()=>r(n,...i)))},nt)}function Fr(e,t){return e==null?null:String(e)}function He(e,t,i,n){var r=e.__style;if(r!==t){var s=Fr(t);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}return n}const Ur=Symbol("is custom element"),Vr=Symbol("is html");function de(e,t,i,n){var r=Br(e);r[t]!==(r[t]=i)&&(t==="loading"&&(e[Wn]=i),i==null?e.removeAttribute(t):typeof i!="string"&&Yr(e).includes(t)?e[t]=i:e.setAttribute(t,i))}function Br(e){return e.__attributes??={[Ur]:e.nodeName.includes("-"),[Vr]:e.namespaceURI===ir}}var di=new Map;function Yr(e){var t=e.getAttribute("is")||e.nodeName,i=di.get(t);if(i)return i;di.set(t,i=[]);for(var n,r=e,s=Element.prototype;s!==r;){n=Dn(r);for(var a in n)n[a].set&&i.push(a);r=vi(r)}return i}function Me(e,t,i=t){var n=new WeakSet;yr(e,"input",async r=>{var s=r?e.defaultValue:e.value;if(s=wt(e)?bt(s):s,i(s),j!==null&&n.add(j),await jr(),s!==(s=t())){var a=e.selectionStart,l=e.selectionEnd;e.value=s??"",l!==null&&(e.selectionStart=a,e.selectionEnd=Math.min(l,e.value.length))}}),gt(t)==null&&e.value&&(i(wt(e)?bt(e.value):e.value),j!==null&&n.add(j)),Gi(()=>{var r=t();if(e===document.activeElement){var s=Ye??j;if(n.has(s))return}wt(e)&&r===bt(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function wt(e){var t=e.type;return t==="number"||t==="range"}function bt(e){return e===""?null:+e}function fi(e,t){return e===t||e?.[Be]===t}function Xr(e={},t,i,n){return Ir(()=>{var r,s;return Gi(()=>{r=s,s=[],gt(()=>{e!==i(...s)&&(t(e,...s),r&&fi(i(...r),e)&&t(null,...r))})}),()=>{Ht(()=>{s&&fi(i(...s),e)&&t(null,...s)})}}),e}function nn(e,t,i){if(e==null)return t(void 0),fe;const n=gt(()=>e.subscribe(t,i));return n.unsubscribe?()=>n.unsubscribe():n}const ye=[];function Ut(e,t=fe){let i=null;const n=new Set;function r(l){if(bi(e,l)&&(e=l,i)){const o=!ye.length;for(const u of n)u[1](),ye.push(u,e);if(o){for(let u=0;u<ye.length;u+=2)ye[u][0](ye[u+1]);ye.length=0}}}function s(l){r(l(e))}function a(l,o=fe){const u=[l,o];return n.add(u),n.size===1&&(i=t(r,s)||fe),l(e),()=>{n.delete(u),n.size===0&&i&&(i(),i=null)}}return{set:r,update:s,subscribe:a}}function Kr(e){let t;return nn(e,i=>t=i)(),t}let Pt=Symbol();function Ne(e,t,i){const n=i[t]??={store:null,source:Ai(void 0),unsubscribe:fe};if(n.store!==e&&!(Pt in i))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=fe;else{var r=!0;n.unsubscribe=nn(e,s=>{r?n.source.v=s:m(n.source,s)}),r=!1}return e&&Pt in i?Kr(e):f(n.source)}function gi(e,t){return e.set(t),t}function ht(){const e={};function t(){Hi(()=>{for(var i in e)e[i].unsubscribe();Je(e,Pt,{enumerable:!1,value:!0})})}return[e,t]}function rn(e){B===null&&Fn(),Pe(()=>{const t=gt(e);if(typeof t=="function")return t})}const Jr="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Jr);function Zr(e,t){t.onclick&&t.onclick(t.index)}function Qr(e,t){m(t,!0)}var $r=ue('<div class="container svelte-kyctpi"><input type="image" class="svelte-kyctpi"/></div>');function es(e,t){me(t,!0);let i=C(!1),n,r=C(""),s=C(F(t.grid.cellWidth)),a=at(()=>f(s)/t.width),l,o=!1,u=(d,_,p,E)=>"";rn(()=>{l.style.zIndex=0,t.imageLoader.onAllLoaded(()=>{o=!0,l.src=t.imageLoader.imageUrls[t.index],m(r,u(n,t.isActive,f(i),o),!0)}),u=(d,_,p,E)=>t.styler?t.styler(d,f(a),t.width,t.height,_,p,E,f(s),l):""}),Pe(()=>{n=t.grid.getPosition(t.grid.getGridCoordinate(t.index)),m(s,t.grid.cellWidth,!0),m(r,u(n,t.isActive,f(i),o),!0)});function g(){m(i,!1)}function h(){}var v=$r(),c=k(v);de(c,"src",null),c.__click=[Zr,t],c.__mouseover=[Qr,i],Xr(c,d=>l=d,()=>l),dt(()=>{He(c,f(r)),de(c,"width",f(s)),de(c,"height",f(s)*t.height/t.width),de(c,"alt",t.alt)}),it("mouseleave",c,g),it("focus",c,h),oe(e,v),pe()}qe(["click","mouseover"]);const Ke=Ut(null);function ts(e,t){me(t,!0);const[i,n]=ht(),r=()=>Ne(Ke,"$playingStone",i);let s=C(!1);function a(){m(s,t.player.play(t.stone,l),!0),f(s)&&gi(Ke,{stone:t.stone,index:t.index})}function l(o){o.stone.number===t.stone.number&&(m(s,!1),r().index===t.index&&gi(Ke,null))}{let o=at(()=>`Stone number ${t.stone.number}`);es(e,{get index(){return t.index},get grid(){return t.grid},get width(){return t.stone.width},get height(){return t.stone.height},get alt(){return f(o)},onclick:a,get styler(){return t.styler},get isActive(){return f(s)},get imageLoader(){return t.imageLoader}})}pe(),n()}var is=ue("<main></main>");function ns(e,t){const i="#909087",n="#303027";function r(a,l,o,u,g,h,v,c,d){let _="";if(a){const p=a.vCentre-l*u/2;_+=`left: ${a.left}px; top: ${p}px;`,_+=`width: ${c}px;`,d.height=c*u/o,g?(_+=`border-color: ${i};`,_+="opacity: 1;"):h&&(_+=`border-color: ${n};`)}return h&&(_+="filter: contrast(1.2);",_+="filter: brightness(1.2);"),v?_+="opacity: 1;":_+="opacity: 0;",_}var s=is();$i(s,21,()=>t.stones,Qi,(a,l,o)=>{ts(a,{get stone(){return f(l)},index:o,get grid(){return t.grid},get player(){return t.player},styler:r,get imageLoader(){return t.imageLoader}})}),oe(e,s)}const Se=[{image:"stone-000.jpg",audio:"Image01.ogg",number:"1",width:840,height:798,gcn:"11191"},{image:"stone-001.jpg",audio:"Image02.ogg",number:"2",width:1043,height:1082,gcn:"11615"},{image:"stone-002.jpg",audio:"Image03.ogg",number:"3",width:950,height:693,gcn:"12138"},{image:"stone-003.jpg",audio:"Image04.ogg",number:"4",width:833,height:867,gcn:"12450"},{image:"stone-004.jpg",audio:"Image05.ogg",number:"5",width:861,height:735,gcn:"12481"},{image:"stone-005.jpg",audio:"Image06.ogg",number:"6",width:863,height:819,gcn:"13056"},{image:"stone-006.jpg",audio:"Image07.ogg",number:"7",width:903,height:922,gcn:"13427"},{image:"stone-007.jpg",audio:"Image08.ogg",number:"8",width:776,height:685,gcn:"13973"},{image:"stone-008.jpg",audio:"Image09.ogg",number:"9",width:903,height:1105,gcn:"14888"},{image:"stone-009.jpg",audio:"Image10.ogg",number:"10",width:880,height:893,gcn:"14889"},{image:"stone-011.jpg",audio:"Image11.ogg",number:"11",width:473,height:553,gcn:"15244"},{image:"stone-012.jpg",audio:"Image12.ogg",number:"12",width:472,height:546,gcn:"15266"},{image:"stone-013.jpg",audio:"Image13.ogg",number:"13",width:476,height:526,gcn:"15286"},{image:"stone-014.jpg",audio:"Image14.ogg",number:"14",width:467,height:533,gcn:"15290"},{image:"stone-015.jpg",audio:"Image15.ogg",number:"15",width:468,height:527,gcn:"15291"},{image:"stone-016.jpg",audio:"Image16.ogg",number:"16",width:883,height:820,gcn:"15292"},{image:"stone-017.jpg",audio:"Image17.ogg",number:"17",width:465,height:513,gcn:"15456"},{image:"stone-018.jpg",audio:"Image18.ogg",number:"18",width:469,height:546,gcn:"15457"},{image:"stone-019.jpg",audio:"Image19.ogg",number:"19",width:807,height:904,gcn:"15828"},{image:"stone-020.jpg",audio:"Image20.ogg",number:"20",width:848,height:848,gcn:"15899"},{image:"stone-021.jpg",audio:"Image21.ogg",number:"21",width:900,height:932,gcn:"15902"},{image:"stone-022.jpg",audio:"Image22.ogg",number:"22",width:469,height:519,gcn:"16000"},{image:"stone-023.jpg",audio:"Image23.ogg",number:"23",width:469,height:524,gcn:"16037"},{image:"stone-024.jpg",audio:"Image24.ogg",number:"24",width:476,height:508,gcn:"16038"},{image:"stone-025.jpg",audio:"Image25.ogg",number:"25",width:476,height:517,gcn:"16039"},{image:"stone-026.jpg",audio:"Image26.ogg",number:"26",width:852,height:810,gcn:"16164"},{image:"stone-027.jpg",audio:"Image27.ogg",number:"27",width:852,height:842,gcn:"16166"},{image:"stone-028.jpg",audio:"Image28.ogg",number:"28",width:686,height:759,gcn:"16300"},{image:"stone-029.jpg",audio:"Image29.ogg",number:"29",width:476,height:528,gcn:"16301"},{image:"stone-030.jpg",audio:"Image30.ogg",number:"30",width:815,height:789,gcn:"16547"},{image:"stone-031.jpg",audio:"Image31.ogg",number:"31",width:859,height:945,gcn:"16720"},{image:"stone-032.jpg",audio:"Image32.ogg",number:"32",width:970,height:806,gcn:"16736"},{image:"stone-033.jpg",audio:"Image33.ogg",number:"33",width:464,height:529,gcn:"18419"},{image:"stone-034.jpg",audio:"Image34.ogg",number:"34",width:412,height:394,gcn:"18421"},{image:"stone-035.jpg",audio:"Image35.ogg",number:"35",width:469,height:537,gcn:"34219"},{image:"stone-036.jpg",audio:"Image36.ogg",number:"36",width:923,height:852,gcn:"34220"},{image:"stone-037.jpg",audio:"Image37.ogg",number:"37",width:920,height:890,gcn:"34201"},{image:"stone-038.jpg",audio:"Image38a.ogg",number:"38a",width:473,height:532,gcn:"34202"},{image:"stone-039.jpg",audio:"Image38b.ogg",number:"38b",width:855,height:861,gcn:"34202"},{image:"stone-040.jpg",audio:"Image39.ogg",number:"39",width:476,height:542,gcn:"34204"},{image:"stone-041.jpg",audio:"Image40.ogg",number:"40",width:497,height:473,gcn:"34206"},{image:"stone-042.jpg",audio:"Image41.ogg",number:"41",width:473,height:537,gcn:"34209"},{image:"stone-043.jpg",audio:"Image42.ogg",number:"42",width:462,height:540,gcn:"34212"},{image:"stone-044.jpg",audio:"Image43.ogg",number:"43",width:465,height:536,gcn:"34214"},{image:"stone-045.jpg",audio:"Image44.ogg",number:"44",width:471,height:506,gcn:"34465"},{image:"stone-046.jpg",audio:"Image45.ogg",number:"45",width:470,height:527,gcn:"34539"},{image:"stone-047.jpg",audio:"Image46.ogg",number:"46",width:1080,height:1089,gcn:"34603"},{image:"stone-048.jpg",audio:"Image47.ogg",number:"47",width:467,height:541,gcn:"34793"},{image:"stone-049.jpg",audio:"Image48.ogg",number:"48",width:877,height:729,gcn:"35875"},{image:"stone-050.jpg",audio:"Image49.ogg",number:"49",width:466,height:526,gcn:"41457"},{image:"stone-051.jpg",audio:"Image50.ogg",number:"50",width:468,height:498,gcn:"41458"},{image:"stone-052.jpg",audio:"Image51.ogg",number:"51",width:844,height:745,gcn:"42366"},{image:"stone-053.jpg",audio:"Image52.ogg",number:"52",width:465,height:548,gcn:"60715"}];class rs{constructor(t,i,n,r,s,a,l){this.width=t,this.height=i,this.columns=n,this.items=r,this.minHEdgePadding=s,this.minVEdgePadding=a,this.gridPadding=l,this.rows=this.getGridCoordinate(r-1).row+1,this.calculateCellSize()}calculateCellSize(){const t=this.columns-1;this.gapSize=Math.floor(this.height*this.gridPadding);const i=this.width*(2*this.minHEdgePadding)+t*this.gapSize,n=Math.floor((this.width-i)/this.columns),r=this.rows-1,s=this.width*2*this.minVEdgePadding+r*this.gapSize,a=Math.floor((this.height-s)/this.rows);this.cellSize=Math.min(n,a),this.columns*this.cellSize+t*this.gapSize,this.hEdgePadding=Math.floor((this.width-this.columns*this.cellSize-t*this.gapSize)/2),this.vEdgePadding=Math.floor((this.height-this.rows*this.cellSize-r*this.gapSize)/2)}getGridCoordinate(t){const i=Math.floor(t/this.columns),n=t%this.columns;return{row:i,column:n}}getPosition(t){const{row:i,column:n}=t,r=this.hEdgePadding+n*(this.cellSize+this.gapSize),s=this.vEdgePadding+this.cellSize/2+i*(this.cellSize+this.gapSize);return{left:r,vCentre:s}}}function ss(e,t,i,n,r){const s=t+(t-1)*n,a=i+(i-1)*r;return e*s/a}class Ct{constructor(t,i,n,r,s,a,l,o){this.containerWidth=t,this.containerHeight=i,this.columns=n,this.items=r,this.minHorizontalEdgePadding=s,this.minVerticalEdgePadding=a,this.horizontalGridSpacingFactor=l,this.verticalGridSpacingFactor=o,this.rows=this.getGridCoordinate(r-1).row+1,this.calculateGridDimensions()}calculateGridDimensions(){const t=ss(1,this.columns,this.rows,this.horizontalGridSpacingFactor,this.verticalGridSpacingFactor),i=this.containerWidth*(1-2*this.minHorizontalEdgePadding),n=this.containerHeight*(1-2*this.minVerticalEdgePadding);i/n>t?(this.verticalEdgePadding=this.containerHeight*this.minVerticalEdgePadding,this.contentHeight=this.containerHeight-2*this.verticalEdgePadding,this.contentWidth=this.contentHeight*t,this.horizontalEdgePadding=(this.containerWidth-this.contentWidth)/2):(this.horizontalEdgePadding=this.containerWidth*this.minHorizontalEdgePadding,this.contentWidth=this.containerWidth-2*this.horizontalEdgePadding,this.contentHeight=this.contentWidth/t,this.verticalEdgePadding=(this.containerHeight-this.contentHeight)/2),this.cellWidth=this.contentWidth/(this.columns+this.horizontalGridSpacingFactor*(this.columns-1)),this.cellHeight=this.contentHeight/(this.rows+this.verticalGridSpacingFactor*(this.rows-1)),this.horizontalGridSpacing=this.cellWidth*this.horizontalGridSpacingFactor,this.verticalGridSpacing=this.cellHeight*this.verticalGridSpacingFactor}getGridCoordinate(t){const i=Math.floor(t/this.columns),n=t%this.columns;return{row:i,column:n}}getPosition(t){const{row:i,column:n}=t,r=this.horizontalEdgePadding+n*(this.cellWidth+this.horizontalGridSpacing),s=this.verticalEdgePadding+this.cellHeight/2+i*(this.cellHeight+this.verticalGridSpacing);return{left:r,vCentre:s}}}class as{constructor(t,i,n){const r=`audio/${i.audio}`;this.stoneData=i,this.endedCallback=n,this.ended=!1,this.playing=!1,this.source=t.createBufferSource(),this.source.connect(t.destination),this.request=new XMLHttpRequest,this.request.open("GET",r),this.request.responseType="arraybuffer",this.request.onload=()=>{let s=this.request.response;t.decodeAudioData(s,a=>this.source.buffer=a),this.playing||(this.playing=!0,this.source.start())},this.source.onended=s=>{this.ended=!0,this.endedCallback({e:s,stone:this.stoneData})}}start(){this.request.send()}stop(){this.ended||this.source.stop()}}class os{constructor(){this.initialised=!1}initialise(){this.audioCtx=new AudioContext}stop(){this.source&&this.source.stop()}play(t,i){return this.stoneData&&this.stoneData.number===t.number&&!this.source.ended?(this.stop(),!1):(this.initialised||(this.initialise(),this.initialised=!0),this.stop(),this.endedCallback=i,this.stoneData=t,this.source=new as(this.audioCtx,t,i),this.source.start(),!0)}}class ls{constructor(t){this.imageUrls=Array(t.length);let i=0;for(const n of t){const r=i,s=new XMLHttpRequest;s.open("GET",`images/${n.image}`,!0),s.responseType="arraybuffer",s.onload=a=>{const l=new Uint8Array(s.response),o=new Blob([l],{type:"image/jpeg"}),g=(window.URL||window.webkitURL).createObjectURL(o);this.onloaded(r,g)},s.send(),i++}this.loadedCount=0,this.timerStart=Date.now().valueOf(),this.callbacks=[]}onloaded(t,i){this.imageUrls[t]=i,this.loadedCount++,this.loadedCount===this.imageUrls.length&&(console.log(`All loaded in ${Date.now().valueOf()-this.timerStart}ms`),this.callbacks.forEach(n=>n()))}onAllLoaded(t){this.callbacks.push(t)}}class us{constructor(t,i,n=.97,r){this.containerWidth=t,this.containerHeight=i,this.maxImageSizeRatio=n,this.maxImageWidth=r}setElementDimensions(t,i){this.elementDimensions={width:t,height:i},this.setScale(),this.height=this.scale*this.elementDimensions.height,this.width=this.scale*this.elementDimensions.width}setScale(){const t=this.getMaxImageToContainerRatio();t>this.maxImageSizeRatio?this.scale=this.maxImageSizeRatio/t:this.scale=this.maxImageSizeRatio/t,this.scale*this.elementDimensions.width>this.maxImageWidth&&(this.scale=this.scale*this.maxImageWidth/(this.scale*this.elementDimensions.width))}getOffsets(){const t=(this.containerWidth-this.scale*this.elementDimensions.width)/2,i=(this.containerHeight-this.height)/2;return{left:t,top:i}}getOffsetCSS(){if(!this.elementDimensions)return"";const t=this.getOffsets();return`left: ${t.left}px; top: ${t.top}px;`}getDimensionsCSS(){return this.elementDimensions?`width: ${this.width}px; height: ${this.height}px`:""}getMaxImageToContainerRatio(){const t=this.elementDimensions.width/this.containerWidth,i=this.elementDimensions.height/this.containerHeight;return Math.max(t,i)}}function cs(e,t){t.player.stop()}var ds=ue('<div class="container svelte-dnilii"><img class="svelte-dnilii"/> <div class="cancel-text svelte-dnilii" role="none">×</div></div>');function fs(e,t){me(t,!0);const[i,n]=ht(),r=()=>Ne(Ke,"$playingStone",i),s=1e3;let a=C(""),l=C(""),o=C(""),u=C(""),g=C(!1),h=C(null);const v=`Stone number ${t.stone.number}`,c=new us(t.windowWidth,t.windowHeight,void 0,1600);c.setElementDimensions(t.stone.width,t.stone.height),m(a,c.getOffsetCSS(),!0),rn(()=>{t.imageLoader.onAllLoaded(()=>{m(h,t.imageLoader.imageUrls[t.index],!0)}),m(a,`width: ${c.width}px; height: ${c.height}px`),m(o,`left: ${c.width-30}px; top: 0px`);let x=c.height-85;m(u,`top: ${x}px`)});function d(){E(),setTimeout(y)}function _(){E(),setTimeout(p,s)}function p(){m(a,`transition: ${s/1e3}s ease-in-out;display: none;`+c.getOffsetCSS()+c.getDimensionsCSS())}function E(){m(a,`transition: ${s/1e3}s ease-in-out;display: inline-block;opacity: 0;`+c.getOffsetCSS()+c.getDimensionsCSS())}function y(){m(a,`transition: ${s/1e3}s ease-in-out;display: inline-block;opacity: 1;`+c.getOffsetCSS()+c.getDimensionsCSS())}function b(x){m(l,c.getDimensionsCSS(),!0),x&&x.index===t.index?(m(g,!0),d()):f(g)&&(m(g,!1),_())}Pe(()=>{b(r())});var A=ds(),T=k(A),S=w(T,2);S.__click=[cs,t],dt(()=>{He(A,f(a)),He(T,f(l)),de(T,"src",f(h)),de(T,"alt",v),He(S,f(o))}),oe(e,A),pe(),n()}qe(["click"]);function yt(e){var t,i,n;return e=e||window.event,e.pageX==null&&e.clientX!=null&&(t=e.target&&e.target.ownerDocument||document,i=t.documentElement,n=t.body,e.pageX=e.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=e.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),{x:e.pageX,y:e.pageY}}var gs=(e,t,i)=>{mr(t,-1),f(t)<0&&m(t,i.length-1)},hs=(e,t,i)=>m(t,(f(t)+1)%i.length),vs=ue('<div class="container svelte-767uqt"><div class="top-bar svelte-767uqt"><button class="svelte-767uqt">&lt;</button> <button class="svelte-767uqt">&gt;</button> <button style="float: right; margin-top: 5px" class="svelte-767uqt">X</button></div> <div class="content svelte-767uqt"><!></div> <img class="resize svelte-767uqt" alt="resize"/></div>');function _s(e,t){me(t,!0);const i=[t.slot01];let n=C(0),r=!1,s=!1,a=C(0),l=C(0),o=C(400),u=C(400),g=at(()=>`left:${f(a)}px;top:${f(l)}px;width:${f(o)}px;height:${f(u)}px;`),h={x:0,y:0},v={x:0,y:0};const c=4;document.onmousemove=d,document.onmouseup=_;function d(O){const L=yt(O);r&&(m(a,L.x-h.x),m(l,L.y-h.y),f(a)<0&&m(a,0),f(l)<0&&m(l,0),f(a)>t.windowWidth-f(o)-c&&m(a,t.windowWidth-f(o)-c),f(l)>t.windowHeight-f(u)-c&&m(l,t.windowHeight-f(u)-c)),s&&(m(o,L.x+v.x-f(a)),m(u,L.y+v.y-f(l)),f(o)<200&&m(o,200),f(u)<200&&m(u,200),f(o)>t.windowWidth-f(a)-c&&m(o,t.windowWidth-f(a)-c),f(u)>t.windowHeight-f(l)-c&&m(u,t.windowHeight-f(l)-c))}function _(){r&&(r=!1),s&&(s=!1)}function p(O){O.preventDefault();const L=yt(O);h.x=L.x-f(a),h.y=L.y-f(l),r=!0}function E(O){O.preventDefault();const L=yt(O);v.x=f(a)+f(o)-L.x,v.y=f(l)+f(u)-L.y,s=!0}var y=vs(),b=k(y),A=k(b);A.__click=[gs,n,i];var T=w(A,2);T.__click=[hs,n,i];var S=w(T,2);S.__click=function(...O){t.hideSettings?.apply(this,O)};var x=w(b,2),G=k(x);Nr(G,()=>i[f(n)]);var ee=w(x,2);de(ee,"src","./resize-handle5.svg"),dt(()=>He(y,f(g))),it("mousedown",b,p,!0),it("mousedown",ee,E,!0),oe(e,y),pe()}qe(["click"]);const ms="#272727",ps=Ut(ms);qe(["click"]);const sn={columns:9,hEdgePadding:3,vEdgePadding:3,hGridSpacing:15,vGridSpacing:25},Vt=Ut(sn);function an(e){Vt.update(t=>({...t,...e}))}var ws=()=>an(sn),bs=(e,t)=>{m(t,!f(t))},ys=ue('<div class="results-container svelte-1doc6qg"><div class="results-row svelte-1doc6qg"><div>window width</div> <div> </div></div> <div class="results-row svelte-1doc6qg"><div>window height</div> <div> </div></div> <div class="results-row svelte-1doc6qg"><div>rows</div> <div> </div></div> <div class="results-row svelte-1doc6qg"><div>content width</div> <div> </div></div> <div class="results-row svelte-1doc6qg"><div>content height</div> <div> </div></div> <div class="results-row svelte-1doc6qg"><div>horizontal edge padding</div> <div> </div></div> <div class="results-row svelte-1doc6qg"><div>vertical edge padding</div> <div> </div></div> <div class="results-row svelte-1doc6qg"><div>cell size</div> <div> </div></div> <div class="results-row svelte-1doc6qg"><div>vertical grid gap</div> <div> </div></div> <div class="results-row svelte-1doc6qg"><div>horizontal grid gap</div> <div> </div></div></div>'),Ss=ue('<h1>Grid Calculations</h1> <div class="container svelte-1doc6qg"><div class="settings-row svelte-1doc6qg"><div>Columns:</div> <input type="number" min="1" width="3" class="svelte-1doc6qg"/></div> <div class="settings-row svelte-1doc6qg"><div class="label" title="Minimum horizontal edge padding as a % of screen width.">Horizontal Edge Padding %:</div> <input type="number" min="1" width="3" class="svelte-1doc6qg"/></div> <div class="settings-row svelte-1doc6qg"><div class="label" title="Minimum vertical edge padding as a % of screen height.">Vertical Edge Padding %:</div> <input type="number" min="1" width="3" class="svelte-1doc6qg"/></div> <div class="settings-row svelte-1doc6qg"><div class="label" title="Horizontal grid gap as a % of cell width.">Horizontal Grid Gap %:</div> <input type="number" min="1" width="3" class="svelte-1doc6qg"/></div> <div class="settings-row svelte-1doc6qg"><div class="label" title="Vertical grid gap as a % of cell height.">Vertical Grid Gap %:</div> <input type="number" min="1" width="3" class="svelte-1doc6qg"/></div></div> <button class="svelte-1doc6qg">Reset to defaults</button> <hr/> <button class="svelte-1doc6qg">Show resulting grid</button> <!>',1);function Es(e,t){me(t,!0);const[i,n]=ht(),r=()=>Ne(Vt,"$gridSettings",i);let s=C(F(r().columns)),a=C(F(r().hEdgePadding)),l=C(F(r().vEdgePadding)),o=C(F(r().hGridSpacing)),u=C(F(r().vGridSpacing)),g=C(!1),h=document.body.clientWidth,v=document.body.clientHeight,c=at(()=>new Ct(h,v,f(s),53,f(a)/100,f(l)/100,f(o)/100,f(u)/100));Pe(()=>{m(s,r().columns,!0),m(a,r().hEdgePadding,!0),m(l,r().vEdgePadding,!0),m(o,r().hGridSpacing,!0),m(u,r().vGridSpacing,!0)}),Pe(()=>{an({columns:f(s),hEdgePadding:f(a),vEdgePadding:f(l),hGridSpacing:f(o),vGridSpacing:f(u)})});function d(q){return parseFloat(q).toFixed(2)}var _=Ss(),p=w(Di(_),2),E=k(p),y=w(k(E),2),b=w(E,2),A=w(k(b),2),T=w(b,2),S=w(k(T),2),x=w(T,2),G=w(k(x),2),ee=w(x,2),O=w(k(ee),2),L=w(p,2);L.__click=[ws];var Y=w(L,4);Y.__click=[bs,g];var Ue=w(Y,2);{var Le=q=>{var we=ys(),Ve=k(we),vt=w(k(Ve),2),on=k(vt),Bt=w(Ve,2),ln=w(k(Bt),2),un=k(ln),Yt=w(Bt,2),cn=w(k(Yt),2),dn=k(cn),Xt=w(Yt,2),fn=w(k(Xt),2),gn=k(fn),Kt=w(Xt,2),hn=w(k(Kt),2),vn=k(hn),Jt=w(Kt,2),_n=w(k(Jt),2),mn=k(_n),Zt=w(Jt,2),pn=w(k(Zt),2),wn=k(pn),Qt=w(Zt,2),bn=w(k(Qt),2),yn=k(bn),$t=w(Qt,2),Sn=w(k($t),2),En=k(Sn),xn=w($t,2),In=w(k(xn),2),kn=k(In);dt((Pn,Cn,Tn,An,jn,qn,Ln)=>{K(on,`${f(c).containerWidth??""}px`),K(un,`${f(c).containerHeight??""}px`),K(dn,f(c).rows),K(gn,`${Pn??""}px`),K(vn,`${Cn??""}px`),K(mn,`${Tn??""}px`),K(wn,`${An??""}px`),K(yn,`${jn??""}px`),K(En,`${qn??""}px`),K(kn,`${Ln??""}px`)},[()=>d(f(c).contentWidth),()=>d(f(c).contentHeight),()=>d(f(c).horizontalEdgePadding),()=>d(f(c).verticalEdgePadding),()=>d(f(c).cellWidth),()=>d(f(c).horizontalGridSpacing),()=>d(f(c).verticalGridSpacing)]),oe(q,we)};kt(Ue,q=>{f(g)&&q(Le)})}Me(y,()=>f(s),q=>m(s,q)),Me(A,()=>f(a),q=>m(a,q)),Me(S,()=>f(l),q=>m(l,q)),Me(G,()=>f(o),q=>m(o,q)),Me(O,()=>f(u),q=>m(u,q)),oe(e,_),pe(),n()}qe(["click"]);function xs(e,t){_s(e,{get windowWidth(){return t.windowWidth},get windowHeight(){return t.windowHeight},get hideSettings(){return t.hideSettings},slot01:n=>{Es(n,{})},$$slots:{slot01:!0}})}var Is=(e,t)=>m(t,!0),ks=ue('<button class="svelte-1183y0g">Show Settings Window</button>'),Ps=ue("<!> <!> <!> <!>",1);function Cs(e,t){me(t,!0);const[i,n]=ht(),r=()=>Ne(Vt,"$gridSettings",i),s=()=>Ne(ps,"$backgroundColor",i);let a=C(!0),l=document.body.clientWidth,o=document.body.clientHeight,u=C(F(new Ct(l,o,r().columns,Se.length,r().hEdgePadding/100,r().vEdgePadding/100,r().hGridSpacing/100,r().vGridSpacing/100)));Pe(()=>{document.body.style.backgroundColor=s(),m(u,new Ct(l,o,r().columns,Se.length,r().hEdgePadding/100,r().vEdgePadding/100,r().hGridSpacing/100,r().vGridSpacing/100),!0)});const g=new ls(Se);new rs(l,o,9,Se.length,.01,.02,.03);const h=new os;var v=Ps(),c=Di(v);{var d=b=>{var A=ks();A.__click=[Is,a],oe(b,A)};kt(c,b=>{f(a)||b(d)})}var _=w(c,2);ns(_,{get stones(){return Se},get grid(){return f(u)},get imageLoader(){return g},get player(){return h}});var p=w(_,2);$i(p,17,()=>Se,Qi,(b,A,T)=>{fs(b,{index:T,get stone(){return f(A)},get imageLoader(){return g},get windowWidth(){return l},get windowHeight(){return o},get player(){return h}})});var E=w(p,2);{var y=b=>{xs(b,{get windowWidth(){return l},get windowHeight(){return o},hideSettings:()=>m(a,!1)})};kt(E,b=>{f(a)&&b(y)})}oe(e,v),pe(),n()}qe(["click"]);Hr(Cs,{target:document.getElementById("app")});
